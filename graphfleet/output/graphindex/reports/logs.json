{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 41 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 41 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\n-Goal-\nGiven a text document that is potentially relevant to this activity, first identify all entities needed from the text in order to capture the information and ideas in the text.\nNext, report all relationships among the identified entities.\n\n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: Suggest several labels or categories for the entity. The categories should not be specific, but should be as general as possible.\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n\n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\nFormat each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n\n3. Return output in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing. as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n\n4. If you have to translate into The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing., just translate the descriptions, nothing else!\n\n5. When finished, output <|COMPLETE|>.\n\n-Examples-\n######################\n\nExample 1:\n\ntext:\n results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most\n------------------------\noutput:\n(\"entity\"<|>RAG<|>METHOD<|>RAG (Retrieval-Augmented Generation) is a method that produces direct responses in text generation tasks)\n##\n(\"entity\"<|>PODCAST TRANSCRIPTS<|>DATASET<|>A dataset consisting of transcripts from podcasts used for analysis)\n##\n(\"entity\"<|>NEWS ARTICLES<|>DATASET<|>A dataset consisting of news articles used for analysis)\n##\n(\"entity\"<|>C0<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>C1<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>C2<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>C3<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>TS<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>UNITS<|>METRIC<|>The number of context units, such as community summaries or text chunks, used in the analysis)\n##\n(\"entity\"<|>TOKENS<|>METRIC<|>The number of tokens, or individual words, used in the analysis)\n##\n(\"entity\"<|>% MAX<|>METRIC<|>The percentage of the maximum token count used in the analysis)\n##\n(\"relationship\"<|>RAG<|>PODCAST TRANSCRIPTS<|>RAG is used to produce direct responses from podcast transcripts<|>7)\n##\n(\"relationship\"<|>RAG<|>NEWS ARTICLES<|>RAG is used to produce direct responses from news articles<|>7)\n##\n(\"relationship\"<|>C0<|>PODCAST TRANSCRIPTS<|>C0 is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>C1<|>PODCAST TRANSCRIPTS<|>C1 is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>C2<|>PODCAST TRANSCRIPTS<|>C2 is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>C3<|>PODCAST TRANSCRIPTS<|>C3 is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>TS<|>PODCAST TRANSCRIPTS<|>TS is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>C0<|>NEWS ARTICLES<|>C0 is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>C1<|>NEWS ARTICLES<|>C1 is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>C2<|>NEWS ARTICLES<|>C2 is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>C3<|>NEWS ARTICLES<|>C3 is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>TS<|>NEWS ARTICLES<|>TS is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>UNITS<|>PODCAST TRANSCRIPTS<|>Units are used to measure the context in podcast transcripts<|>6)\n##\n(\"relationship\"<|>UNITS<|>NEWS ARTICLES<|>Units are used to measure the context in news articles<|>6)\n##\n(\"relationship\"<|>TOKENS<|>PODCAST TRANSCRIPTS<|>Tokens are used to measure the word count in podcast transcripts<|>6)\n##\n(\"relationship\"<|>TOKENS<|>NEWS ARTICLES<|>Tokens are used to measure the word count in news articles<|>6)\n##\n(\"relationship\"<|>% MAX<|>PODCAST TRANSCRIPTS<|>% Max is used to measure the percentage of maximum token count in podcast transcripts<|>6)\n##\n(\"relationship\"<|>% MAX<|>NEWS ARTICLES<|>% Max is used to measure the percentage of maximum token count in news articles<|>6)\n<|COMPLETE|>\n#############################\n\n\nExample 2:\n\ntext:\n , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence: \n------------------------\noutput:\n(\"entity\"<|>KOESTEN, L.<|>PERSON<|>Koesten, L. is an author of the paper \"Talking datasets–understanding data sensemaking behaviours\")\n##\n(\"entity\"<|>GREGORY, K.<|>PERSON<|>Gregory, K. is an author of the paper \"Talking datasets–understanding data sensemaking behaviours\")\n##\n(\"entity\"<|>GROTH, P.<|>PERSON<|>Groth, P. is an author of the paper \"Talking datasets–understanding data sensemaking behaviours\")\n##\n(\"entity\"<|>SIMPERL, E.<|>PERSON<|>Simperl, E. is an author of the paper \"Talking datasets–understanding data sensemaking behaviours\")\n##\n(\"entity\"<|>INTERNATIONAL JOURNAL OF HUMAN-COMPUTER STUDIES<|>PUBLICATION<|>The journal where the paper \"Talking datasets–understanding data sensemaking behaviours\" was published)\n##\n(\"entity\"<|>KURATOV, Y.<|>PERSON<|>Kuratov, Y. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>BULATOV, A.<|>PERSON<|>Bulatov, A. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>ANOKHIN, P.<|>PERSON<|>Anokhin, P. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>SOROKIN, D.<|>PERSON<|>Sorokin, D. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>SOROKIN, A.<|>PERSON<|>Sorokin, A. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>BURTSEV, M.<|>PERSON<|>Burtsev, M. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>LANGCHAIN<|>ORGANIZATION<|>LangChain is an organization that developed Langchain graphs)\n##\n(\"entity\"<|>LANGCHAIN GRAPHS<|>TECHNOLOGY<|>Langchain graphs is a technology developed by LangChain)\n##\n(\"entity\"<|>LASKAR, M. T. R.<|>PERSON<|>Laskar, M. T. R. is an author of the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\")\n##\n(\"entity\"<|>HOQUE, E.<|>PERSON<|>Hoque, E. is an author of the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\")\n##\n(\"entity\"<|>HUANG, J.<|>PERSON<|>Huang, J. is an author of the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\")\n##\n(\"entity\"<|>ADVANCES IN ARTIFICIAL INTELLIGENCE<|>PUBLICATION<|>The conference where the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\" was presented)\n##\n(\"relationship\"<|>KOESTEN, L.<|>GREGORY, K.<|>Koesten, L. and Gregory, K. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>KOESTEN, L.<|>GROTH, P.<|>Koesten, L. and Groth, P. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>KOESTEN, L.<|>SIMPERL, E.<|>Koesten, L. and Simperl, E. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>GREGORY, K.<|>GROTH, P.<|>Gregory, K. and Groth, P. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>GREGORY, K.<|>SIMPERL, E.<|>Gregory, K. and Simperl, E. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>GROTH, P.<|>SIMPERL, E.<|>Groth, P. and Simperl, E. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>BULATOV, A.<|>Kuratov, Y. and Bulatov, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>ANOKHIN, P.<|>Kuratov, Y. and Anokhin, P. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>SOROKIN, D.<|>Kuratov, Y. and Sorokin, D. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>SOROKIN, A.<|>Kuratov, Y. and Sorokin, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>BURTSEV, M.<|>Kuratov, Y. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>BULATOV, A.<|>ANOKHIN, P.<|>Bulatov, A. and Anokhin, P. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>BULATOV, A.<|>SOROKIN, D.<|>Bulatov, A. and Sorokin, D. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>BULATOV, A.<|>SOROKIN, A.<|>Bulatov, A. and Sorokin, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>BULATOV, A.<|>BURTSEV, M.<|>Bulatov, A. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>ANOKHIN, P.<|>SOROKIN, D.<|>Anokhin, P. and Sorokin, D. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>ANOKHIN, P.<|>SOROKIN, A.<|>Anokhin, P. and Sorokin, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>ANOKHIN, P.<|>BURTSEV, M.<|>Anokhin, P. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>SOROKIN, D.<|>SOROKIN, A.<|>Sorokin, D. and Sorokin, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>SOROKIN, D.<|>BURTSEV, M.<|>Sorokin, D. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>SOROKIN, A.<|>BURTSEV, M.<|>Sorokin, A. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>LANGCHAIN<|>LANGCHAIN GRAPHS<|>LangChain developed Langchain graphs<|>9)\n##\n(\"relationship\"<|>LASKAR, M. T. R.<|>HOQUE, E.<|>Laskar, M. T. R. and Hoque, E. co-authored the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\"<|>8)\n##\n(\"relationship\"<|>LASKAR, M. T. R.<|>HUANG, J.<|>Laskar, M. T. R. and Huang, J. co-authored the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\"<|>8)\n##\n(\"relationship\"<|>HOQUE, E.<|>HUANG, J.<|>Hoque, E. and Huang, J. co-authored the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\"<|>8)\n<|COMPLETE|>\n#############################\n\n\n\n-Real Data-\n######################\ntext: H., Li, Z., Xu, J., Qu, J., and Zhou, J. (2023a). Is chatgpt\na good nlg evaluator? a preliminary study. arXiv preprint arXiv:2303.04048 .\nWang, S., Khramtsova, E., Zhuang, S., and Zuccon, G. (2024). Feb4rag: Evaluating federated search\nin the context of retrieval augmented generation. arXiv preprint arXiv:2402.11891 .\nWang, Y ., Lipka, N., Rossi, R. A., Siu, A., Zhang, R., and Derr, T. (2023b). Knowledge graph\nprompting for multi-document question answering.\nXu, Y . and Lapata, M. (2021). Text summarization with latent queries. arXiv preprint\narXiv:2106.00104 .\nYang, Z., Qi, P., Zhang, S., Bengio, Y ., Cohen, W. W., Salakhutdinov, R., and Manning, C. D. (2018).\nHotpotQA: A dataset for diverse, explainable multi-hop question answering. In Conference on\nEmpirical Methods in Natural Language Processing (EMNLP) .\nYao, J.-g., Wan, X., and Xiao, J. (2017). Recent advances in document summarization. Knowledge\nand Information Systems , 53:297–336.\n14Yao, L., Peng, J., Mao, C., and Luo, Y . (2023). Exploring large language models for knowledge\ngraph completion.\nZhang, J. (2023). Graph-toolformer: To empower llms with graph reasoning ability via prompt\naugmented by chatgpt. arXiv preprint arXiv:2304.11116 .\nZhang, Y ., Zhang, Y ., Gan, Y ., Yao, L., and Wang, C. (2024). Causal graph discovery with retrieval-\naugmented generation based large language models. arXiv preprint arXiv:2402.15301 .\nZheng, L., Chiang, W.-L., Sheng, Y ., Zhuang, S., Wu, Z., Zhuang, Y ., Lin, Z., Li, Z., Li, D., Xing,\nE., et al. (202\n######################\noutput:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 41 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 41 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\n-Goal-\nGiven a text document that is potentially relevant to this activity, first identify all entities needed from the text in order to capture the information and ideas in the text.\nNext, report all relationships among the identified entities.\n\n-Steps-\n1. Identify all entities. For each identified entity, extract the following information:\n- entity_name: Name of the entity, capitalized\n- entity_type: Suggest several labels or categories for the entity. The categories should not be specific, but should be as general as possible.\n- entity_description: Comprehensive description of the entity's attributes and activities\nFormat each entity as (\"entity\"<|><entity_name><|><entity_type><|><entity_description>)\n\n2. From the entities identified in step 1, identify all pairs of (source_entity, target_entity) that are *clearly related* to each other.\nFor each pair of related entities, extract the following information:\n- source_entity: name of the source entity, as identified in step 1\n- target_entity: name of the target entity, as identified in step 1\n- relationship_description: explanation as to why you think the source entity and the target entity are related to each other\n- relationship_strength: a numeric score indicating strength of the relationship between the source entity and target entity\nFormat each relationship as (\"relationship\"<|><source_entity><|><target_entity><|><relationship_description><|><relationship_strength>)\n\n3. Return output in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing. as a single list of all the entities and relationships identified in steps 1 and 2. Use **##** as the list delimiter.\n\n4. If you have to translate into The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing., just translate the descriptions, nothing else!\n\n5. When finished, output <|COMPLETE|>.\n\n-Examples-\n######################\n\nExample 1:\n\ntext:\n results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most\n------------------------\noutput:\n(\"entity\"<|>RAG<|>METHOD<|>RAG (Retrieval-Augmented Generation) is a method that produces direct responses in text generation tasks)\n##\n(\"entity\"<|>PODCAST TRANSCRIPTS<|>DATASET<|>A dataset consisting of transcripts from podcasts used for analysis)\n##\n(\"entity\"<|>NEWS ARTICLES<|>DATASET<|>A dataset consisting of news articles used for analysis)\n##\n(\"entity\"<|>C0<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>C1<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>C2<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>C3<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>TS<|>CATEGORY<|>A category or cluster used in the analysis, representing a specific subset of the data)\n##\n(\"entity\"<|>UNITS<|>METRIC<|>The number of context units, such as community summaries or text chunks, used in the analysis)\n##\n(\"entity\"<|>TOKENS<|>METRIC<|>The number of tokens, or individual words, used in the analysis)\n##\n(\"entity\"<|>% MAX<|>METRIC<|>The percentage of the maximum token count used in the analysis)\n##\n(\"relationship\"<|>RAG<|>PODCAST TRANSCRIPTS<|>RAG is used to produce direct responses from podcast transcripts<|>7)\n##\n(\"relationship\"<|>RAG<|>NEWS ARTICLES<|>RAG is used to produce direct responses from news articles<|>7)\n##\n(\"relationship\"<|>C0<|>PODCAST TRANSCRIPTS<|>C0 is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>C1<|>PODCAST TRANSCRIPTS<|>C1 is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>C2<|>PODCAST TRANSCRIPTS<|>C2 is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>C3<|>PODCAST TRANSCRIPTS<|>C3 is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>TS<|>PODCAST TRANSCRIPTS<|>TS is a category used in the analysis of podcast transcripts<|>5)\n##\n(\"relationship\"<|>C0<|>NEWS ARTICLES<|>C0 is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>C1<|>NEWS ARTICLES<|>C1 is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>C2<|>NEWS ARTICLES<|>C2 is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>C3<|>NEWS ARTICLES<|>C3 is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>TS<|>NEWS ARTICLES<|>TS is a category used in the analysis of news articles<|>5)\n##\n(\"relationship\"<|>UNITS<|>PODCAST TRANSCRIPTS<|>Units are used to measure the context in podcast transcripts<|>6)\n##\n(\"relationship\"<|>UNITS<|>NEWS ARTICLES<|>Units are used to measure the context in news articles<|>6)\n##\n(\"relationship\"<|>TOKENS<|>PODCAST TRANSCRIPTS<|>Tokens are used to measure the word count in podcast transcripts<|>6)\n##\n(\"relationship\"<|>TOKENS<|>NEWS ARTICLES<|>Tokens are used to measure the word count in news articles<|>6)\n##\n(\"relationship\"<|>% MAX<|>PODCAST TRANSCRIPTS<|>% Max is used to measure the percentage of maximum token count in podcast transcripts<|>6)\n##\n(\"relationship\"<|>% MAX<|>NEWS ARTICLES<|>% Max is used to measure the percentage of maximum token count in news articles<|>6)\n<|COMPLETE|>\n#############################\n\n\nExample 2:\n\ntext:\n , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence: \n------------------------\noutput:\n(\"entity\"<|>KOESTEN, L.<|>PERSON<|>Koesten, L. is an author of the paper \"Talking datasets–understanding data sensemaking behaviours\")\n##\n(\"entity\"<|>GREGORY, K.<|>PERSON<|>Gregory, K. is an author of the paper \"Talking datasets–understanding data sensemaking behaviours\")\n##\n(\"entity\"<|>GROTH, P.<|>PERSON<|>Groth, P. is an author of the paper \"Talking datasets–understanding data sensemaking behaviours\")\n##\n(\"entity\"<|>SIMPERL, E.<|>PERSON<|>Simperl, E. is an author of the paper \"Talking datasets–understanding data sensemaking behaviours\")\n##\n(\"entity\"<|>INTERNATIONAL JOURNAL OF HUMAN-COMPUTER STUDIES<|>PUBLICATION<|>The journal where the paper \"Talking datasets–understanding data sensemaking behaviours\" was published)\n##\n(\"entity\"<|>KURATOV, Y.<|>PERSON<|>Kuratov, Y. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>BULATOV, A.<|>PERSON<|>Bulatov, A. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>ANOKHIN, P.<|>PERSON<|>Anokhin, P. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>SOROKIN, D.<|>PERSON<|>Sorokin, D. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>SOROKIN, A.<|>PERSON<|>Sorokin, A. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>BURTSEV, M.<|>PERSON<|>Burtsev, M. is an author of the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\")\n##\n(\"entity\"<|>LANGCHAIN<|>ORGANIZATION<|>LangChain is an organization that developed Langchain graphs)\n##\n(\"entity\"<|>LANGCHAIN GRAPHS<|>TECHNOLOGY<|>Langchain graphs is a technology developed by LangChain)\n##\n(\"entity\"<|>LASKAR, M. T. R.<|>PERSON<|>Laskar, M. T. R. is an author of the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\")\n##\n(\"entity\"<|>HOQUE, E.<|>PERSON<|>Hoque, E. is an author of the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\")\n##\n(\"entity\"<|>HUANG, J.<|>PERSON<|>Huang, J. is an author of the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\")\n##\n(\"entity\"<|>ADVANCES IN ARTIFICIAL INTELLIGENCE<|>PUBLICATION<|>The conference where the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\" was presented)\n##\n(\"relationship\"<|>KOESTEN, L.<|>GREGORY, K.<|>Koesten, L. and Gregory, K. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>KOESTEN, L.<|>GROTH, P.<|>Koesten, L. and Groth, P. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>KOESTEN, L.<|>SIMPERL, E.<|>Koesten, L. and Simperl, E. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>GREGORY, K.<|>GROTH, P.<|>Gregory, K. and Groth, P. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>GREGORY, K.<|>SIMPERL, E.<|>Gregory, K. and Simperl, E. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>GROTH, P.<|>SIMPERL, E.<|>Groth, P. and Simperl, E. co-authored the paper \"Talking datasets–understanding data sensemaking behaviours\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>BULATOV, A.<|>Kuratov, Y. and Bulatov, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>ANOKHIN, P.<|>Kuratov, Y. and Anokhin, P. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>SOROKIN, D.<|>Kuratov, Y. and Sorokin, D. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>SOROKIN, A.<|>Kuratov, Y. and Sorokin, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>KURATOV, Y.<|>BURTSEV, M.<|>Kuratov, Y. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>BULATOV, A.<|>ANOKHIN, P.<|>Bulatov, A. and Anokhin, P. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>BULATOV, A.<|>SOROKIN, D.<|>Bulatov, A. and Sorokin, D. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>BULATOV, A.<|>SOROKIN, A.<|>Bulatov, A. and Sorokin, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>BULATOV, A.<|>BURTSEV, M.<|>Bulatov, A. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>ANOKHIN, P.<|>SOROKIN, D.<|>Anokhin, P. and Sorokin, D. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>ANOKHIN, P.<|>SOROKIN, A.<|>Anokhin, P. and Sorokin, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>ANOKHIN, P.<|>BURTSEV, M.<|>Anokhin, P. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>SOROKIN, D.<|>SOROKIN, A.<|>Sorokin, D. and Sorokin, A. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>SOROKIN, D.<|>BURTSEV, M.<|>Sorokin, D. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>SOROKIN, A.<|>BURTSEV, M.<|>Sorokin, A. and Burtsev, M. co-authored the paper \"In search of needles in a 11m haystack: Recurrent memory finds what llms miss\"<|>8)\n##\n(\"relationship\"<|>LANGCHAIN<|>LANGCHAIN GRAPHS<|>LangChain developed Langchain graphs<|>9)\n##\n(\"relationship\"<|>LASKAR, M. T. R.<|>HOQUE, E.<|>Laskar, M. T. R. and Hoque, E. co-authored the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\"<|>8)\n##\n(\"relationship\"<|>LASKAR, M. T. R.<|>HUANG, J.<|>Laskar, M. T. R. and Huang, J. co-authored the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\"<|>8)\n##\n(\"relationship\"<|>HOQUE, E.<|>HUANG, J.<|>Hoque, E. and Huang, J. co-authored the paper \"Query focused abstractive summarization via incorporating query relevance and transfer learning with transformer models\"<|>8)\n<|COMPLETE|>\n#############################\n\n\n\n-Real Data-\n######################\ntext: Xiv:2402.15301 .\nZheng, L., Chiang, W.-L., Sheng, Y ., Zhuang, S., Wu, Z., Zhuang, Y ., Lin, Z., Li, Z., Li, D., Xing,\nE., et al. (2024). Judging llm-as-a-judge with mt-bench and chatbot arena. Advances in Neural\nInformation Processing Systems , 36.\n15\n######################\noutput:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 40 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 40 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 40 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 40 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 40 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 40 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 37 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 37 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 34 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 34 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 32 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 32 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 32 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 32 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 30 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 30 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 28 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 28 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 25 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 25 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 21 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 21 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 20 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 20 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 11 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 11 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 9 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 9 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 32 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 32 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 10 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 10 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 9 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 9 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "MANY entities and relationships were missed in the last extraction. Remember to ONLY emit entities that match any of the previously extracted types. Add them below using the same format:\n"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 17 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 17 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n280,TRAVIS KELCE,\"Travis Kelce is a public figure frequently mentioned in entertainment articles, known for his contributions to the sports industry and his high-profile personal life.\",6\n293,SPORTS,\"The entity \"\"SPORTS\"\" refers to a sector within the entertainment industry that encompasses athletic events and competitions. This sector includes public figures involved in sports, such as athletes, coaches, and sports commentators.\",4\n\n\n-----Claims-----\nhuman_readable_id,subject_id,type,status,description\n34,TRAVIS KELCE,PUBLIC INTEREST,TRUE,Travis Kelce is frequently mentioned in entertainment articles due to his high-profile status and the public’s interest in his career and personal life.\n39,TRAVIS KELCE,FREQUENT MENTIONS,TRUE,Travis Kelce is repeatedly mentioned across various entertainment articles.\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n142,GRAPH RAG,TRAVIS KELCE,Graph RAG mentions Travis Kelce as a prominent public figure,96\n574,ENTERTAINMENT INDUSTRY,TRAVIS KELCE,Travis Kelce is a significant figure in the entertainment industry,25\n585,ENTERTAINMENT INDUSTRY,SPORTS,Sports is a sector within the entertainment industry,23\n394,NAIVE RAG,TRAVIS KELCE,Naive RAG mentions Travis Kelce as a public figure,19\n598,TRAVIS KELCE,ANSWER 2,Travis Kelce is one of the specific public figures mentioned in Answer 2.,16\n608,SPORTS,ANSWER 1,Answer 1 includes public figures from the sports sector.,15\n609,SPORTS,ANSWER 2,Answer 2 focuses on public figures primarily from the sports sector.,14\n570,ENTERTAINMENT ARTICLES,TRAVIS KELCE,Travis Kelce is frequently mentioned in entertainment articles,12\n599,TRAVIS KELCE,SPORTS,Travis Kelce is a public figure in the sports sector.,10\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 17 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 17 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n216,MT-BENCH,\"MT-BENCH is a benchmark dataset designed for open-domain question answering, specifically targeting explicit fact retrieval. It serves as a critical tool in evaluating the performance of models in retrieving accurate and relevant information from a broad range of topics. MT-Bench is prominently featured in the academic paper titled \"\"Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena,\"\" where it is utilized to assess the capabilities of large language models in a structured and rigorous manner. This dataset plays a significant role in advancing the field of Natural Language Processing and Information Retrieval by providing a standardized metric for model comparison and evaluation.\",12\n223,ZHENG ET AL.,Authors associated with the MT-Bench dataset,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n495,MT-BENCH,\"LI, Z.\",\"Li, Z. is an author of the paper that discusses MT-Bench\",32\n491,MT-BENCH,\"ZHUANG, S.\",\"Zhuang, S. is an author of the paper that discusses MT-Bench\",27\n488,MT-BENCH,\"ZHENG, L.\",\"Zheng, L. is an author of the paper that discusses MT-Bench\",24\n489,MT-BENCH,\"CHIANG, W.-L.\",\"Chiang, W.-L. is an author of the paper that discusses MT-Bench\",24\n490,MT-BENCH,\"SHENG, Y.\",\"Sheng, Y. is an author of the paper that discusses MT-Bench\",24\n492,MT-BENCH,\"WU, Z.\",\"Wu, Z. is an author of the paper that discusses MT-Bench\",24\n493,MT-BENCH,\"ZHUANG, Y.\",\"Zhuang, Y. is an author of the paper that discusses MT-Bench\",24\n494,MT-BENCH,\"LIN, Z.\",\"Lin, Z. is an author of the paper that discusses MT-Bench\",24\n496,MT-BENCH,\"LI, D.\",\"Li, D. is an author of the paper that discusses MT-Bench\",24\n497,MT-BENCH,\"XING, E.\",\"Xing, E. is an author of the paper that discusses MT-Bench\",24\n498,MT-BENCH,CHATBOT ARENA,\"MT-Bench and Chatbot Arena are both tools used in the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",23\n487,MT-BENCH,ZHENG ET AL.,Zheng et al. are the authors associated with the MT-Bench dataset,13\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n688,\"LIANG, Y.\",\"Liang, Y. is an author of the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",8\n689,\"MENG, F.\",\"Meng, F. is an author of the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",8\n691,\"SHI, H.\",\"Shi, H. is an author of the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",8\n690,\"SUN, Z.\",\"Sun, Z. is an author of the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",8\n687,\"WANG, J.\",\"Wang, J. is an author of the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",8\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n1069,\"LIANG, Y.\",\"LI, Z.\",\"Liang, Y. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1075,\"MENG, F.\",\"LI, Z.\",\"Meng, F. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1084,\"SHI, H.\",\"LI, Z.\",\"Shi, H. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1080,\"SUN, Z.\",\"LI, Z.\",\"Sun, Z. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1062,\"WANG, J.\",\"LI, Z.\",\"Wang, J. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1070,\"LIANG, Y.\",\"XU, J.\",\"Liang, Y. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1071,\"LIANG, Y.\",\"QU, J.\",\"Liang, Y. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1072,\"LIANG, Y.\",\"ZHOU, J.\",\"Liang, Y. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1076,\"MENG, F.\",\"XU, J.\",\"Meng, F. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1077,\"MENG, F.\",\"QU, J.\",\"Meng, F. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1078,\"MENG, F.\",\"ZHOU, J.\",\"Meng, F. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1085,\"SHI, H.\",\"XU, J.\",\"Shi, H. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1086,\"SHI, H.\",\"QU, J.\",\"Shi, H. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1087,\"SHI, H.\",\"ZHOU, J.\",\"Shi, H. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1081,\"SUN, Z.\",\"XU, J.\",\"Sun, Z. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1082,\"SUN, Z.\",\"QU, J.\",\"Sun, Z. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1083,\"SUN, Z.\",\"ZHOU, J.\",\"Sun, Z. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1063,\"WANG, J.\",\"XU, J.\",\"Wang, J. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1064,\"WANG, J.\",\"QU, J.\",\"Wang, J. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1065,\"WANG, J.\",\"ZHOU, J.\",\"Wang, J. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1066,\"LIANG, Y.\",\"MENG, F.\",\"Liang, Y. and Meng, F. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n1067,\"LIANG, Y.\",\"SUN, Z.\",\"Liang, Y. and Sun, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n1068,\"LIANG, Y.\",\"SHI, H.\",\"Liang, Y. and Shi, H. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n1058,\"WANG, J.\",\"LIANG, Y.\",\"Wang, J. and Liang, Y. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n1073,\"MENG, F.\",\"SUN, Z.\",\"Meng, F. and Sun, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n1074,\"MENG, F.\",\"SHI, H.\",\"Meng, F. and Shi, H. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n1059,\"WANG, J.\",\"MENG, F.\",\"Wang, J. and Meng, F. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n1061,\"WANG, J.\",\"SHI, H.\",\"Wang, J. and Shi, H. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n1079,\"SUN, Z.\",\"SHI, H.\",\"Sun, Z. and Shi, H. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n1060,\"WANG, J.\",\"SUN, Z.\",\"Wang, J. and Sun, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",16\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n692,\"LI, Z.\",\"Li, Z. is an author who has contributed to the field of Natural Language Processing and Information Retrieval through their work on evaluating language models. Specifically, Li, Z. has co-authored the paper titled \"\"Is ChatGPT a Good NLG Evaluator? A Preliminary Study,\"\" which explores the effectiveness of ChatGPT as a natural language generation evaluator. Additionally, Li, Z. has co-authored another paper, \"\"Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena,\"\" which examines the performance of large language models in evaluative roles using specific benchmarking tools. These contributions highlight Li, Z.'s active involvement in advancing the understanding and assessment of language models within the academic community.\",20\n693,\"XU, J.\",\"Xu, J. is an author of the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",9\n694,\"QU, J.\",\"Qu, J. is an author of the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",9\n695,\"ZHOU, J.\",\"Zhou, J. is an author of the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",9\n698,H.,\"H. is an author of the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",4\n\n\n-----Claims-----\nhuman_readable_id,subject_id,type,status,description\n163,\"LI, Z.\",PUBLICATION,TRUE,\"Li, Z. is an author of the publication titled \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\" published in 2023.\"\n199,\"LI, Z.\",AUTHORSHIP,TRUE,\"Li, Z. is listed as an author of the paper titled \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\" published in Advances in Neural Information Processing Systems, 36.\"\n164,\"XU, J.\",PUBLICATION,TRUE,\"Xu, J. is an author of the publication titled \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\" published in 2023.\"\n165,\"QU, J.\",PUBLICATION,TRUE,\"Qu, J. is an author of the publication titled \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\" published in 2023.\"\n166,\"ZHOU, J.\",PUBLICATION,TRUE,\"Zhou, J. is an author of the publication titled \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\" published in 2023.\"\n162,H.,PUBLICATION,TRUE,\"H. is an author of the publication titled \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\" published in 2023.\"\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n1095,\"LI, Z.\",\"ZHUANG, S.\",\"Zhuang, S. and Li, Z. co-authored the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",35\n1092,\"LI, Z.\",\"ZHENG, L.\",\"Zheng, L. and Li, Z. co-authored the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",32\n1093,\"LI, Z.\",\"CHIANG, W.-L.\",\"Chiang, W.-L. and Li, Z. co-authored the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",32\n1094,\"LI, Z.\",\"SHENG, Y.\",\"Sheng, Y. and Li, Z. co-authored the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",32\n1096,\"LI, Z.\",\"WU, Z.\",\"Wu, Z. and Li, Z. co-authored the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",32\n1097,\"LI, Z.\",\"ZHUANG, Y.\",\"Zhuang, Y. and Li, Z. co-authored the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",32\n1098,\"LI, Z.\",\"LIN, Z.\",\"Lin, Z. and Li, Z. co-authored the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",32\n1099,\"LI, Z.\",\"LI, D.\",\"Li, Z. and Li, D. co-authored the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",32\n1100,\"LI, Z.\",\"XING, E.\",\"Li, Z. and Xing, E. co-authored the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",32\n495,MT-BENCH,\"LI, Z.\",\"Li, Z. is an author of the paper that discusses MT-Bench\",32\n1101,\"LI, Z.\",CHATBOT ARENA,\"Li, Z. is an author of the paper that discusses Chatbot Arena\",31\n1088,\"LI, Z.\",\"XU, J.\",\"Li, Z. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",29\n1089,\"LI, Z.\",\"QU, J.\",\"Li, Z. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",29\n1090,\"LI, Z.\",\"ZHOU, J.\",\"Li, Z. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",29\n1062,\"WANG, J.\",\"LI, Z.\",\"Wang, J. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1069,\"LIANG, Y.\",\"LI, Z.\",\"Liang, Y. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1075,\"MENG, F.\",\"LI, Z.\",\"Meng, F. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1080,\"SUN, Z.\",\"LI, Z.\",\"Sun, Z. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1084,\"SHI, H.\",\"LI, Z.\",\"Shi, H. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",28\n1091,\"LI, Z.\",H.,\"H. and Li, Z. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",24\n1105,\"QU, J.\",\"ZHOU, J.\",\"Qu, J. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",18\n1102,\"XU, J.\",\"QU, J.\",\"Xu, J. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",18\n1103,\"XU, J.\",\"ZHOU, J.\",\"Xu, J. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",18\n1064,\"WANG, J.\",\"QU, J.\",\"Wang, J. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1071,\"LIANG, Y.\",\"QU, J.\",\"Liang, Y. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1077,\"MENG, F.\",\"QU, J.\",\"Meng, F. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1082,\"SUN, Z.\",\"QU, J.\",\"Sun, Z. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1086,\"SHI, H.\",\"QU, J.\",\"Shi, H. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1063,\"WANG, J.\",\"XU, J.\",\"Wang, J. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1070,\"LIANG, Y.\",\"XU, J.\",\"Liang, Y. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1076,\"MENG, F.\",\"XU, J.\",\"Meng, F. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1081,\"SUN, Z.\",\"XU, J.\",\"Sun, Z. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1085,\"SHI, H.\",\"XU, J.\",\"Shi, H. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1065,\"WANG, J.\",\"ZHOU, J.\",\"Wang, J. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1072,\"LIANG, Y.\",\"ZHOU, J.\",\"Liang, Y. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1078,\"MENG, F.\",\"ZHOU, J.\",\"Meng, F. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1083,\"SUN, Z.\",\"ZHOU, J.\",\"Sun, Z. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1087,\"SHI, H.\",\"ZHOU, J.\",\"Shi, H. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",17\n1104,\"XU, J.\",H.,\"H. and Xu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",13\n1106,\"QU, J.\",H.,\"H. and Qu, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",13\n1107,\"ZHOU, J.\",H.,\"H. and Zhou, J. co-authored the paper \"\"Is chatgpt a good nlg evaluator? a preliminary study\"\"\",13\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n108,PARTIAL ANSWERS,Intermediate answers generated from community summaries before being combined into a final global answer,2\n109,FINAL GLOBAL ANSWER,The comprehensive answer generated by combining all relevant partial answers,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n191,COMMUNITY SUMMARIES,PARTIAL ANSWERS,Partial answers are generated from community summaries,28\n405,PARTIAL ANSWERS,FINAL GLOBAL ANSWER,Final global answer is generated by combining all relevant partial answers,3\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n96,NAIVE RAG,\"Naive RAG is a basic retrieval-augmented generation (RAG) method used as a baseline for comparison in text generation tasks. It converts documents to text, splits them into chunks, and embeds these chunks into a vector space for query matching. While it produces the most direct responses, it is outperformed by global approaches in terms of comprehensiveness and diversity. Naive RAG is also noted for listing public figures mentioned in entertainment articles, focusing on their professional achievements and personal lives.\",13\n27,COMPREHENSIVENESS,\"COMPREHENSIVENESS is a metric used to evaluate the quality of generated responses by measuring how much detail an answer provides to cover all aspects and details of a question. It assesses the completeness and thoroughness of answers, ensuring that they encompass all relevant information. This metric is particularly important in evaluating the summarization approach, focusing on the completeness of the summary. In practical applications, such as evaluating Podcast transcripts and News articles, comprehensiveness has shown win rates between 72-83% and 72-80%, respectively.\",9\n288,DECISION,A metric used to determine the winner in the comparison of generated responses,3\n326,\"GAO ET AL., 2023\",\"\"\"GAO ET AL., 2023\"\" is a paper published in 2023 by Gao et al. that delves into advanced Retrieval-Augmented Generation (RAG) techniques, specifically where the index is a knowledge graph. The publication also touches upon naive RAG approaches, providing a comprehensive examination of both advanced and basic methodologies within the domain of Natural Language Processing and Information Retrieval.\",3\n318,GLOBAL APPROACHES,Approaches that consistently outperformed the naive RAG in comprehensiveness and diversity metrics,3\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n111,GRAPH RAG,NAIVE RAG,\"Graph RAG is compared to naive RAG in the evaluation. In this comparison, Graph RAG outperformed naive RAG on comprehensiveness and diversity.\",103\n104,GRAPH RAG,COMPREHENSIVENESS,\"Graph RAG is an approach that is evaluated for its comprehensiveness, a target quality used to assess its effectiveness. The method aims to improve the comprehensiveness of generated answers, ensuring that the information provided is thorough and complete. This evaluation metric is crucial in determining the success of Graph RAG in producing detailed and accurate responses.\",99\n145,GRAPH RAG,DECISION,Graph RAG is determined to be the winner based on the decision metric,93\n162,GRAPH RAG,\"GAO ET AL., 2023\",\"Graph RAG incorporates concepts from Gao et al., 2023\",93\n88,LLM,NAIVE RAG,LLM uses Naive RAG to list public figures mentioned in entertainment articles,45\n40,RAG,NAIVE RAG,Naive RAG is a specific implementation of RAG,44\n49,RAG,\"GAO ET AL., 2023\",The paper by Gao et al. discusses advanced RAG where the index is a knowledge graph,34\n227,COMPREHENSIVENESS,PODCAST TRANSCRIPTS,Comprehensiveness is used to evaluate the thoroughness of the generated answers for podcast transcripts,28\n226,COMPREHENSIVENESS,NEWS ARTICLE DATASET,Comprehensiveness is used to evaluate the thoroughness of the generated answers for news articles,25\n224,COMPREHENSIVENESS,NAIVE RAG,Naive RAG is evaluated for comprehensiveness,22\n223,COMPREHENSIVENESS,LLM EVALUATOR,The LLM evaluator assesses answers based on the comprehensiveness metric,20\n393,NAIVE RAG,TAYLOR SWIFT,Naive RAG mentions Taylor Swift as a public figure,19\n394,NAIVE RAG,TRAVIS KELCE,Naive RAG mentions Travis Kelce as a public figure,19\n395,NAIVE RAG,BRITNEY SPEARS,Naive RAG mentions Britney Spears as a public figure,19\n396,NAIVE RAG,JUSTIN TIMBERLAKE,Naive RAG mentions Justin Timberlake as a public figure,19\n228,COMPREHENSIVENESS,CONTEXT WINDOW SIZE,The smallest context window size (8k) was universally better for comprehensiveness,18\n400,NAIVE RAG,SS,SS represents naive RAG in the analysis,17\n397,NAIVE RAG,DECISION,Naive RAG is determined to be the loser based on the decision metric,16\n401,NAIVE RAG,\"GAO ET AL., 2023\",\"Gao et al., 2023 discusses naive RAG approaches\",16\n398,NAIVE RAG,GLOBAL APPROACHES,Global approaches consistently outperformed the naive RAG,16\n399,NAIVE RAG,DIRECTNESS,Naive RAG produces the most direct responses,16\n225,COMPREHENSIVENESS,DECISION,Comprehensiveness is a metric used to determine the decision,12\n229,COMPREHENSIVENESS,FINAL EVALUATION,The final evaluation prioritized comprehensiveness in answers,12\n230,COMPREHENSIVENESS,GLOBAL APPROACHES,Global approaches achieved higher comprehensiveness win rates,12\n236,DIVERSITY,GLOBAL APPROACHES,Global approaches achieved higher diversity win rates,10\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n261,ENTERTAINMENT INDUSTRY,\"The **ENTERTAINMENT INDUSTRY** is a multifaceted sector that encompasses various forms of entertainment, including movies, music, television, sports, and digital media. This industry is characterized by its diverse range of content and mediums, which collectively contribute to its broad appeal and significant cultural impact. The entertainment industry plays a crucial role in shaping public opinion, trends, and cultural norms through its extensive reach and influence across different platforms and genres.\",19\n283,ACTORS AND DIRECTORS,\"A category of public figures in the entertainment industry, including those involved in film and television\",1\n285,ATHLETES AND COACHES,\"A category of public figures in the entertainment industry, including those involved in sports\",1\n295,CULTURAL NARRATIVES,A category within the entertainment industry that includes stories and themes that shape culture,1\n284,MUSICIANS AND EXECUTIVES,\"A category of public figures in the entertainment industry, including those involved in music\",1\n286,INFLUENCERS AND ENTREPRENEURS,\"A category of public figures in the entertainment industry, including those involved in digital media and business\",1\n287,PUBLIC FIGURES IN CONTROVERSY,A category of public figures in the entertainment industry who are involved in controversies,1\n296,TRENDS,A category within the entertainment industry that includes popular movements and styles,1\n297,SOCIAL DISCUSSIONS,A category within the entertainment industry that includes public conversations and debates,1\n298,PUBLIC DISCOURSE,A category within the entertainment industry that includes formal discussions and communications,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n573,ENTERTAINMENT INDUSTRY,TAYLOR SWIFT,Taylor Swift is a significant figure in the entertainment industry,25\n574,ENTERTAINMENT INDUSTRY,TRAVIS KELCE,Travis Kelce is a significant figure in the entertainment industry,25\n575,ENTERTAINMENT INDUSTRY,BRITNEY SPEARS,Britney Spears is a significant figure in the entertainment industry,25\n576,ENTERTAINMENT INDUSTRY,JUSTIN TIMBERLAKE,Justin Timberlake is a significant figure in the entertainment industry,25\n584,ENTERTAINMENT INDUSTRY,MUSIC,Music is a sector within the entertainment industry,25\n568,ENTERTAINMENT ARTICLES,ENTERTAINMENT INDUSTRY,Entertainment articles cover topics related to the entertainment industry,25\n585,ENTERTAINMENT INDUSTRY,SPORTS,Sports is a sector within the entertainment industry,23\n582,ENTERTAINMENT INDUSTRY,FILM,Film is a sector within the entertainment industry,21\n583,ENTERTAINMENT INDUSTRY,TELEVISION,Television is a sector within the entertainment industry,21\n586,ENTERTAINMENT INDUSTRY,DIGITAL MEDIA,Digital Media is a sector within the entertainment industry,21\n577,ENTERTAINMENT INDUSTRY,ACTORS AND DIRECTORS,Actors and Directors are a category within the entertainment industry,20\n579,ENTERTAINMENT INDUSTRY,ATHLETES AND COACHES,Athletes and Coaches are a category within the entertainment industry,20\n587,ENTERTAINMENT INDUSTRY,CULTURAL NARRATIVES,Cultural Narratives are a category within the entertainment industry,20\n578,ENTERTAINMENT INDUSTRY,MUSICIANS AND EXECUTIVES,Musicians and Executives are a category within the entertainment industry,20\n580,ENTERTAINMENT INDUSTRY,INFLUENCERS AND ENTREPRENEURS,Influencers and Entrepreneurs are a category within the entertainment industry,20\n581,ENTERTAINMENT INDUSTRY,PUBLIC FIGURES IN CONTROVERSY,Public Figures in Controversy are a category within the entertainment industry,20\n588,ENTERTAINMENT INDUSTRY,TRENDS,Trends are a category within the entertainment industry,20\n589,ENTERTAINMENT INDUSTRY,SOCIAL DISCUSSIONS,Social Discussions are a category within the entertainment industry,20\n590,ENTERTAINMENT INDUSTRY,PUBLIC DISCOURSE,Public Discourse is a category within the entertainment industry,20\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n281,BRITNEY SPEARS,\"Britney Spears is a public figure frequently mentioned in entertainment articles, known for her significant contributions to the music industry and her high-profile personal life.\",6\n282,JUSTIN TIMBERLAKE,\"Justin Timberlake is a public figure frequently mentioned in entertainment articles, known for his significant contributions to the music industry and his high-profile personal life.\",6\n279,TAYLOR SWIFT,\"Taylor Swift is a public figure frequently mentioned in entertainment articles, known for her contributions to the music industry and her high-profile personal life.\",6\n300,ANSWER 2,\"\"\"ANSWER 2\"\" is a generated answer for the example question in the News article dataset. It focuses on a smaller group of public figures, primarily from the music industry and sports, and relies heavily on a single source for data. \"\"ANSWER 2\"\" provides concise explanations for the frequent mentions of specific public figures such as Taylor Swift, Travis Kelce, Britney Spears, and Justin Timberlake.\",10\n260,ENTERTAINMENT ARTICLES,\"ENTERTAINMENT ARTICLES is a collection of articles focused on the entertainment industry. This dataset consists of articles related to various aspects of the entertainment sector, providing a comprehensive resource for understanding trends, developments, and key topics within this field.\",6\n292,MUSIC,\"MUSIC is a sector within the entertainment industry that encompasses musical performances and recordings. This sector includes public figures involved in the music industry, such as singers, musicians, and producers.\",6\n\n\n-----Claims-----\nhuman_readable_id,subject_id,type,status,description\n33,TAYLOR SWIFT,PUBLIC INTEREST,TRUE,Taylor Swift is frequently mentioned in entertainment articles due to her high-profile status and the public’s interest in her career and personal life.\n38,TAYLOR SWIFT,FREQUENT MENTIONS,TRUE,Taylor Swift is repeatedly mentioned across various entertainment articles.\n35,BRITNEY SPEARS,PUBLIC INTEREST,TRUE,Britney Spears is frequently mentioned in entertainment articles due to her high-profile status and the public’s interest in her career and personal life.\n40,BRITNEY SPEARS,FREQUENT MENTIONS,TRUE,Britney Spears is repeatedly mentioned across various entertainment articles.\n36,JUSTIN TIMBERLAKE,PUBLIC INTEREST,TRUE,Justin Timberlake is frequently mentioned in entertainment articles due to his high-profile status and the public’s interest in his career and personal life.\n41,JUSTIN TIMBERLAKE,FREQUENT MENTIONS,TRUE,Justin Timberlake is repeatedly mentioned across various entertainment articles.\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n143,GRAPH RAG,BRITNEY SPEARS,Graph RAG mentions Britney Spears as a prominent public figure,96\n144,GRAPH RAG,JUSTIN TIMBERLAKE,Graph RAG mentions Justin Timberlake as a prominent public figure,96\n141,GRAPH RAG,TAYLOR SWIFT,Graph RAG mentions Taylor Swift as a prominent public figure,96\n616,ANSWER 2,NEWS ARTICLE DATASET,ANSWER 2 is a generated answer for a question in the NEWS ARTICLE DATASET. It relies heavily on a single source from the NEWS ARTICLE DATASET for data.,26\n575,ENTERTAINMENT INDUSTRY,BRITNEY SPEARS,Britney Spears is a significant figure in the entertainment industry,25\n568,ENTERTAINMENT ARTICLES,ENTERTAINMENT INDUSTRY,Entertainment articles cover topics related to the entertainment industry,25\n576,ENTERTAINMENT INDUSTRY,JUSTIN TIMBERLAKE,Justin Timberlake is a significant figure in the entertainment industry,25\n584,ENTERTAINMENT INDUSTRY,MUSIC,Music is a sector within the entertainment industry,25\n573,ENTERTAINMENT INDUSTRY,TAYLOR SWIFT,Taylor Swift is a significant figure in the entertainment industry,25\n395,NAIVE RAG,BRITNEY SPEARS,Naive RAG mentions Britney Spears as a public figure,19\n396,NAIVE RAG,JUSTIN TIMBERLAKE,Naive RAG mentions Justin Timberlake as a public figure,19\n393,NAIVE RAG,TAYLOR SWIFT,Naive RAG mentions Taylor Swift as a public figure,19\n606,MUSIC,ANSWER 1,Answer 1 includes public figures from the music sector.,17\n596,TAYLOR SWIFT,ANSWER 2,Taylor Swift is one of the specific public figures mentioned in Answer 2.,16\n598,TRAVIS KELCE,ANSWER 2,Travis Kelce is one of the specific public figures mentioned in Answer 2.,16\n600,BRITNEY SPEARS,ANSWER 2,Britney Spears is one of the specific public figures mentioned in Answer 2.,16\n602,JUSTIN TIMBERLAKE,ANSWER 2,Justin Timberlake is one of the specific public figures mentioned in Answer 2.,16\n607,MUSIC,ANSWER 2,Answer 2 focuses on public figures primarily from the music sector.,16\n566,PUBLIC FIGURES,ANSWER 2,\"Answer 2 focuses on a smaller group of public figures, primarily from the music industry and sports.\",15\n615,ANSWER 2,NAÏVE RAG,\"Answer 2 was generated using the Naïve RAG method, which directly lists specific public figures who are repeatedly mentioned across various entertainment articles.\",14\n609,SPORTS,ANSWER 2,Answer 2 focuses on public figures primarily from the sports sector.,14\n617,ANSWER 2,DATA SOURCES,Answer 2 relies heavily on a single data source.,12\n601,BRITNEY SPEARS,MUSIC,Britney Spears is a public figure in the music sector.,12\n571,ENTERTAINMENT ARTICLES,BRITNEY SPEARS,Britney Spears is frequently mentioned in entertainment articles,12\n569,ENTERTAINMENT ARTICLES,TAYLOR SWIFT,Taylor Swift is frequently mentioned in entertainment articles,12\n570,ENTERTAINMENT ARTICLES,TRAVIS KELCE,Travis Kelce is frequently mentioned in entertainment articles,12\n572,ENTERTAINMENT ARTICLES,JUSTIN TIMBERLAKE,Justin Timberlake is frequently mentioned in entertainment articles,12\n603,JUSTIN TIMBERLAKE,MUSIC,Justin Timberlake is a public figure in the music sector.,12\n597,TAYLOR SWIFT,MUSIC,Taylor Swift is a public figure in the music sector.,12\n564,PUBLIC FIGURES,ENTERTAINMENT ARTICLES,Public figures are repeatedly mentioned across various entertainment articles,11\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n299,ANSWER 1,\"Answer 1 provides a varied and rich response by covering a wide range of public figures from different sectors of the entertainment industry, including film, television, music, sports, gaming, and digital media. It offers insights into the contributions and influence of these figures, as well as controversies and their impact on public discourse. The answer also cites specific data sources for each mentioned figure, indicating a diverse range of evidence to support the claims.\",11\n294,DIGITAL MEDIA,\"DIGITAL MEDIA is a sector within the entertainment industry that encompasses online content and social media. This sector includes public figures involved in online platforms, such as influencers, content creators, and digital marketers. These individuals play a significant role in shaping digital landscapes through their engagement with audiences and their ability to leverage various online tools and platforms for content dissemination and marketing purposes.\",2\n290,FILM,\"The entity \"\"FILM\"\" refers to a sector within the entertainment industry that encompasses movies and cinema. This sector includes public figures involved in the movie industry, such as actors, directors, and producers.\",2\n291,TELEVISION,\"The entity \"\"TELEVISION\"\" refers to a sector within the entertainment industry that encompasses TV shows and series. This sector includes public figures involved in TV shows, such as actors, hosts, and producers.\",2\n305,DATA SOURCES,Data sources are references or reports used to support claims about public figures and their influence.,2\n304,GAMING,\"The gaming sector includes public figures involved in the gaming industry, including gamers, developers, and streamers.\",1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n146,GRAPH RAG,ANSWER 1,\"Answer 1 was generated using the Graph RAG method, which provides a comprehensive and structured overview of public figures across various sectors of the entertainment industry.\",101\n611,ANSWER 1,NEWS ARTICLE DATASET,Answer 1 cites specific data sources from the News article dataset for each mentioned figure.,27\n586,ENTERTAINMENT INDUSTRY,DIGITAL MEDIA,Digital Media is a sector within the entertainment industry,21\n582,ENTERTAINMENT INDUSTRY,FILM,Film is a sector within the entertainment industry,21\n583,ENTERTAINMENT INDUSTRY,TELEVISION,Television is a sector within the entertainment industry,21\n606,MUSIC,ANSWER 1,Answer 1 includes public figures from the music sector.,17\n565,PUBLIC FIGURES,ANSWER 1,Answer 1 covers a wide range of public figures from different sectors of the entertainment industry.,16\n608,SPORTS,ANSWER 1,Answer 1 includes public figures from the sports sector.,15\n612,ANSWER 1,CONTROVERSIES,Answer 1 provides insights into controversies involving public figures and their impact on public discourse.,13\n614,ANSWER 1,DATA SOURCES,Answer 1 cites specific data sources for each mentioned figure.,13\n604,FILM,ANSWER 1,Answer 1 includes public figures from the film sector.,13\n605,TELEVISION,ANSWER 1,Answer 1 includes public figures from the television sector.,13\n610,DIGITAL MEDIA,ANSWER 1,Answer 1 includes public figures from the digital media sector.,13\n613,ANSWER 1,GAMING,Answer 1 includes public figures from the gaming sector.,12\n617,ANSWER 2,DATA SOURCES,Answer 2 relies heavily on a single data source.,12\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n13,GRAPH RAG,\"Graph RAG (Retrieval-Augmented Generation) is a sophisticated method that leverages the natural modularity of graphs to partition data for global summarization tasks. This approach integrates multiple stages and concepts, including knowledge graph generation, retrieval-augmented generation (RAG), and query-focused summarization (QFS), to support human sensemaking over text corpora. It is particularly effective in providing comprehensive and structured overviews of public figures across various sectors of the entertainment industry, as well as generating answers for questions in the News article dataset.\n\nGraph RAG employs a high-level data flow and pipeline for processing and summarizing text, combining both global and local approaches to optimize token usage in text generation tasks. It uses community summaries to improve answer comprehensiveness and diversity while requiring fewer tokens compared to traditional source text summarization methods. This method has been shown to outperform naive RAG in terms of comprehensiveness and diversity in text generation tasks.\n\nA specific implementation of Graph RAG involves using four levels of graph communities, incorporating concepts from other systems such as self-memory and parallel generation of community answers. This multi-stage mechanism allows for the comparison of multiple conditions, enhancing the overall effectiveness of the summarization process.\n\nGraph RAG, launched by NebulaGraph, is a retrieval-augmented generation technology based on knowledge graphs. It combines global summarization with graph-based text indexing to answer questions over private text corpora, making it a versatile tool for various text analysis and summarization applications.\",90\n28,DIVERSITY,\"DIVERSITY is a metric used to evaluate the variety and richness of answers generated in response to a question. It measures how varied and rich an answer is in providing different perspectives and insights. This metric is particularly important in assessing the quality of summarization approaches, focusing on the variety of information included in the summary. DIVERSITY is applied to various types of content, including Podcast transcripts, where win rates range from 75-82%, and News articles, with win rates ranging from 62-71%. It is a crucial target quality for evaluating the effectiveness of different methods in generating diverse and informative responses.\",7\n246,CONDITIONS,\"The entity \"\"CONDITIONS\"\" refers to the different scenarios or variables that are compared in an experiment. Specifically, in the context of the analysis, these conditions include Graph RAG, text summarization, and semantic search RAG. These conditions are used to evaluate and compare various aspects of performance and effectiveness within the domain of Natural Language Processing and Information Retrieval.\",3\n98,ACTIVITY-CENTERED SENSEMAKING QUESTIONS,\"Questions generated to evaluate the summarization approach, focusing on understanding activities\",1\n410,ALONSO,A person who contributed to the work mentioned in the acknowledgements,1\n329,ANSWER COMPREHENSIVENESS,Answer comprehensiveness is a measure used to evaluate the completeness of answers provided by different methods,1\n347,\"CHENG ET AL., 2024\",A reference to a publication by Cheng et al. in 2024,1\n107,CORPUS,A large collection of texts or documents used for analysis and summarization,1\n101,DATA FLOW,The high-level process of the Graph RAG approach and pipeline,1\n102,DESIGN PARAMETERS,\"Design parameters are key settings and configurations in the Graph RAG approach. These parameters are crucial as they influence the design of the Graph RAG approach and pipeline, determining the effectiveness and efficiency of the overall system.\",1\n331,ELEMENT EXTRACTION PROMPTS,Element extraction prompts are used to extract specific details in the Graph RAG index,1\n422,ENTITY-BASED GRAPH INDEX,A graph index organized around entities,1\n338,FEDERATED RETRIEVAL-GENERATION (FEB4RAG),A federated strategy for retrieval and generation,1\n352,\"FENG ET AL., 2023\",A reference to a publication by Feng et al. in 2023,1\n97,GLOBAL MAP-REDUCE SUMMARIZATION,A method for summarizing source texts using a map-reduce approach,1\n14,QFS,QFS (Query-Focused Summarization) is a method used to generate summaries based on specific user queries,1\n18,PYTHON,\"Python is a programming language used for implementing both global and local Graph RAG approaches. Additionally, Python is utilized to implement the open-source version of the Graph RAG approach.\",1\n99,HIERARCHICAL LEVEL,The level of detail in community summaries used to answer queries,1\n100,TOKEN COSTS,\"TOKEN COSTS refer to the computational cost measured in tokens used in the summarization process. Specifically, in the context of the Graph RAG (Retrieval-Augmented Generation) approach, token costs denote the number of tokens required for processing text. This metric is crucial for evaluating the efficiency and scalability of text processing methods within the Natural Language Processing and Information Retrieval domain.\",1\n106,QUERY,A specific question or request for information that the summarization methods aim to answer,1\n112,REAL-WORLD DATASETS,\"Datasets that represent real-world information, such as podcast transcripts and news articles\",1\n113,HIERARCHICAL LEVEL OF COMMUNITY SUMMARIES,The level of detail in community summaries used to answer queries,1\n114,SOURCE TEXT SUMMARIZATION,A method that summarizes the original source texts directly,1\n117,HIGH-LEVEL COMMUNITY SUMMARIES,Summaries generated from higher hierarchical levels of the community in the knowledge graph,1\n126,TECHNIQUES,Techniques refer to the specific methods used in the Graph RAG approach,1\n127,IMPLEMENTATION DETAILS,Implementation details are specific configurations and settings used in the Graph RAG approach,1\n270,MULTI-STAGE,A method involving multiple stages or steps,1\n328,ROOT-LEVEL SUMMARIES,Root-level summaries are a type of community summary used in the analysis,1\n337,ITERATIVE RETRIEVAL-GENERATION (ITER-RETGEN),A strategy for iterative retrieval and generation,1\n343,TREE OF CLARIFICATIONS,A method for answering multiple interpretations of ambiguous questions by generating a hierarchical structure,1\n348,\"MAO ET AL., 2020\",A reference to a publication by Mao et al. in 2020,1\n349,\"SHAO ET AL., 2023\",A reference to a publication by Shao et al. in 2023,1\n350,\"WANG ET AL., 2024\",A reference to a publication by Wang et al. in 2024,1\n351,\"SU ET AL., 2020\",A reference to a publication by Su et al. in 2020,1\n353,\"TRIVEDI ET AL., 2022\",A reference to a publication by Trivedi et al. in 2022,1\n354,\"KHATTAB ET AL., 2022\",A reference to a publication by Khattab et al. in 2022,1\n355,\"SARTHI ET AL., 2024\",A reference to a publication by Sarthi et al. in 2024,1\n356,\"KIM ET AL., 2023\",A reference to a publication by Kim et al. in 2023,1\n402,RICH TEXT ANNOTATIONS,Annotations that provide detailed information about the text,1\n415,LOCAL GRAPH RAG APPROACHES,Graph RAG approaches that operate in a more localized manner,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n67,LLM,GRAPH RAG,\"Graph RAG utilizes Large Language Models (LLMs) to construct a graph-based text index, enabling the generation of summaries and the answering of queries. In this approach, LLMs play a crucial role in analyzing and generating text based on the information retrieved through the graph structure. Additionally, LLMs leverage the Graph RAG framework to provide comprehensive overviews of public figures in the entertainment industry. This integration of LLMs within Graph RAG enhances the system's ability to process and synthesize complex text data, making it a powerful tool for information retrieval and natural language processing tasks.\",122\n37,RAG,GRAPH RAG,\"Graph RAG is a specific implementation of RAG that combines the strengths of RAG with graph-based text indexing. This method leverages the natural modularity of graphs to partition data, facilitating global summarization. As a specialized approach within the RAG framework, Graph RAG enhances the capabilities of RAG by integrating graph structures to improve the efficiency and effectiveness of text data processing and summarization.\",121\n99,GRAPH RAG,COMMUNITY SUMMARIES,\"Graph RAG is an approach that utilizes community summaries in various capacities to enhance its functionality. Specifically, community summaries are generated within the Graph RAG framework and are employed to generate partial responses. These summaries are also used to compare against source texts, serving as a form of self-memory for the system. By leveraging community summaries, Graph RAG aims to improve the comprehensiveness and diversity of answers. Additionally, Graph RAG incorporates summaries of root-level communities within an entity-based graph index, further enriching its analytical capabilities.\",116\n108,GRAPH RAG,PODCAST TRANSCRIPTS,Podcast transcripts are used as a dataset to evaluate the Graph RAG approach,109\n161,GRAPH RAG,GRAPH INDEX,\"Graph RAG utilizes a self-generated graph index. This self-generated graph index is a crucial component of Graph RAG, enabling it to efficiently manage and retrieve information within its graph-based framework. The use of a self-generated graph index suggests that Graph RAG has an inherent capability to construct and maintain its indexing structure, which likely enhances its performance and adaptability in handling complex data relationships.\",108\n147,GRAPH RAG,NEWS ARTICLE DATASET,Graph RAG is used to generate answers for questions in the News article dataset,106\n109,GRAPH RAG,NEWS ARTICLES,News articles are used as a dataset to evaluate the Graph RAG approach,103\n111,GRAPH RAG,NAIVE RAG,\"Graph RAG is compared to naive RAG in the evaluation. In this comparison, Graph RAG outperformed naive RAG on comprehensiveness and diversity.\",103\n139,GRAPH RAG,LLM EVALUATOR,The Graph RAG mechanism uses an LLM evaluator for head-to-head comparison,101\n146,GRAPH RAG,ANSWER 1,\"Answer 1 was generated using the Graph RAG method, which provides a comprehensive and structured overview of public figures across various sectors of the entertainment industry.\",101\n149,GRAPH RAG,TS,TS represents source text summarization in the Graph RAG analysis,100\n104,GRAPH RAG,COMPREHENSIVENESS,\"Graph RAG is an approach that is evaluated for its comprehensiveness, a target quality used to assess its effectiveness. The method aims to improve the comprehensiveness of generated answers, ensuring that the information provided is thorough and complete. This evaluation metric is crucial in determining the success of Graph RAG in producing detailed and accurate responses.\",99\n134,GRAPH RAG,C1,Graph RAG uses high-level community summaries (C1) to answer user queries,99\n135,GRAPH RAG,C2,Graph RAG uses intermediate-level community summaries (C2) to answer user queries,99\n136,GRAPH RAG,C3,\"Graph RAG utilizes low-level community summaries, represented by C3, to answer user queries. C3 plays a crucial role in the Graph RAG analysis by providing detailed summaries of community structures, which are essential for effectively addressing user inquiries.\",99\n133,GRAPH RAG,C0,\"Graph RAG is a system that utilizes root-level community summaries, denoted as C0, to answer user queries. C0 represents these root-level community summaries within the Graph RAG analysis, serving as a foundational element in the system's ability to map out relationships and understand the structural dynamics within specialized communities.\",98\n105,GRAPH RAG,DIVERSITY,\"Graph RAG is an approach in the domain of Natural Language Processing and Information Retrieval that focuses on improving the diversity of generated answers. Diversity, in this context, is a target quality used to evaluate the performance of the Graph RAG approach. By enhancing the diversity of responses, Graph RAG aims to provide a broader range of answers, thereby improving the overall effectiveness and robustness of the system.\",97\n177,GRAPH RAG,HIERARCHICAL COMMUNITY STRUCTURE,Graph RAG uses a hierarchical community structure,97\n107,GRAPH RAG,COMMUNITY DETECTION ALGORITHMS,Community detection algorithms are used in the Graph RAG approach to partition graphs,96\n110,GRAPH RAG,EMPOWERMENT,Graph RAG is evaluated using the target quality of Empowerment. Empowerment is specifically utilized to assess Graph RAG's capability in aiding users to achieve an informed understanding. This evaluation metric underscores the importance of user comprehension and the effectiveness of the Graph RAG approach in facilitating informed decision-making processes.,96\n138,GRAPH RAG,USER QUERIES,Graph RAG uses different levels of graph communities to answer user queries,96\n141,GRAPH RAG,TAYLOR SWIFT,Graph RAG mentions Taylor Swift as a prominent public figure,96\n142,GRAPH RAG,TRAVIS KELCE,Graph RAG mentions Travis Kelce as a prominent public figure,96\n143,GRAPH RAG,BRITNEY SPEARS,Graph RAG mentions Britney Spears as a prominent public figure,96\n144,GRAPH RAG,JUSTIN TIMBERLAKE,Graph RAG mentions Justin Timberlake as a prominent public figure,96\n113,GRAPH RAG,QUERY-FOCUSED SUMMARIZATION,Query-focused summarization is a method used in the Graph RAG approach,95\n119,GRAPH RAG,GLOBAL SUMMARIZATION,Graph RAG uses global summarization to summarize information from a large dataset,95\n158,GRAPH RAG,MULTI-HOP QUESTION ANSWERING,Graph RAG incorporates concepts used in multi-hop question answering,94\n185,GRAPH RAG,NEBULAGRAPH,NebulaGraph launched the industry-first graph RAG: Retrieval-augmented generation with LLM based on knowledge graphs,94\n137,GRAPH RAG,CONDITIONS,\"Graph RAG is a key entity in the analysis, serving both as a condition being compared and as a tool for comparing multiple conditions. This dual role highlights its significance in the study, where it functions not only as a subject of comparison but also as a methodological framework for evaluating other conditions. The analysis likely involves a detailed examination of various conditions, with Graph RAG playing a central role in facilitating these comparisons.\",93\n100,GRAPH RAG,GLOBAL SENSEMAKING QUESTIONS,Graph RAG is designed to handle global sensemaking questions over large datasets,93\n126,GRAPH RAG,LOW-LEVEL COMMUNITY SUMMARIES,Low-level community summaries are generated in the Graph RAG approach,93\n132,GRAPH RAG,RAG SYSTEMS,Graph RAG is a specific implementation of RAG systems,93\n145,GRAPH RAG,DECISION,Graph RAG is determined to be the winner based on the decision metric,93\n152,GRAPH RAG,WIN RATE,Win rate is used to measure the success rate of Graph RAG in providing comprehensive and diverse answers,93\n162,GRAPH RAG,\"GAO ET AL., 2023\",\"Graph RAG incorporates concepts from Gao et al., 2023\",93\n173,GRAPH RAG,COMMUNITY ANSWERS,Graph RAG generates community answers in parallel,93\n178,GRAPH RAG,EMBEDDING-BASED MATCHING,Graph RAG can operate using embedding-based matching,93\n102,GRAPH RAG,HTTPS://AKA.MS/GRAPHRAG,The open-source implementation of Graph RAG will be available at this URL,92\n103,GRAPH RAG,ENTITY KNOWLEDGE GRAPH,Graph RAG uses an entity knowledge graph to index text,92\n106,GRAPH RAG,KNOWLEDGE GRAPH,Graph RAG uses a knowledge graph for global summarization,92\n122,GRAPH RAG,ACTIVITY-CENTERED SENSEMAKING,Activity-centered sensemaking is used to evaluate the Graph RAG approach,92\n127,GRAPH RAG,INTERMEDIATE-LEVEL COMMUNITY SUMMARIES,Intermediate-level community summaries are generated in the Graph RAG approach,92\n129,GRAPH RAG,PIPELINE,The Graph RAG approach involves a specific pipeline for processing and summarizing text,92\n148,GRAPH RAG,SOURCE TEXTS,Graph RAG is compared with source texts for answer comprehensiveness and diversity,92\n154,GRAPH RAG,SELF-MEMORY (SELFMEM),Graph RAG incorporates the concept of self-memory,92\n157,GRAPH RAG,MULTI-DOCUMENT SUMMARIZATION,Graph RAG incorporates concepts used in multi-document summarization,92\n159,GRAPH RAG,HIERARCHICAL INDEX,Graph RAG uses a hierarchical index,92\n174,GRAPH RAG,GRAPH-FREE APPROACH,Graph RAG is compared to a graph-free approach for global summarization,92\n175,GRAPH RAG,MAP-REDUCE SUMMARIZATION,Graph RAG is compared to map-reduce summarization,92\n179,GRAPH RAG,HYBRID RAG SCHEMES,Graph RAG can be part of hybrid RAG schemes,92\n180,GRAPH RAG,MAP-REDUCE SUMMARIZATION MECHANISMS,Graph RAG can employ map-reduce summarization mechanisms,92\n181,GRAPH RAG,COMMUNITY HIERARCHY,Graph RAG can extend operations across the community hierarchy,92\n114,GRAPH RAG,ACTIVITY-CENTERED SENSEMAKING QUESTIONS,Activity-centered sensemaking questions are used to evaluate the Graph RAG approach,91\n182,GRAPH RAG,ALONSO,Alonso contributed to the work on Graph RAG,91\n151,GRAPH RAG,ANSWER COMPREHENSIVENESS,Answer comprehensiveness is used to evaluate the performance of Graph RAG,91\n163,GRAPH RAG,\"CHENG ET AL., 2024\",\"Graph RAG incorporates concepts from Cheng et al., 2024\",91\n121,GRAPH RAG,CORPUS,Graph RAG uses a corpus for analysis and summarization,91\n117,GRAPH RAG,DATA FLOW,Data flow describes the high-level process of the Graph RAG approach,91\n118,GRAPH RAG,DESIGN PARAMETERS,Design parameters are key settings in the Graph RAG approach and significantly influence the Graph RAG approach and pipeline.,91\n153,GRAPH RAG,ELEMENT EXTRACTION PROMPTS,Element extraction prompts are used in Graph RAG to retain specific details in the index,91\n184,GRAPH RAG,ENTITY-BASED GRAPH INDEX,Graph RAG uses an entity-based graph index,91\n156,GRAPH RAG,FEDERATED RETRIEVAL-GENERATION (FEB4RAG),Graph RAG incorporates the concept of federated retrieval-generation,91\n168,GRAPH RAG,\"FENG ET AL., 2023\",\"Graph RAG incorporates concepts from Feng et al., 2023\",91\n112,GRAPH RAG,GLOBAL MAP-REDUCE SUMMARIZATION,Graph RAG is compared to global map-reduce summarization in the evaluation,91\n98,GRAPH RAG,QFS,Graph RAG is proposed as a method to combine the strengths of RAG and QFS,91\n101,GRAPH RAG,PYTHON,Graph RAG is implemented in Python.,91\n115,GRAPH RAG,HIERARCHICAL LEVEL,Hierarchical level of community summaries is varied to evaluate the Graph RAG approach,91\n116,GRAPH RAG,TOKEN COSTS,\"The \"\"Graph RAG\"\" approach is evaluated in terms of its performance by considering \"\"Token Costs.\"\" Token costs are measured to assess the efficiency of the Graph RAG method, indicating that the computational expense associated with processing tokens is a critical factor in determining the overall effectiveness of this approach.\",91\n120,GRAPH RAG,QUERY,Graph RAG aims to answer specific queries,91\n123,GRAPH RAG,REAL-WORLD DATASETS,Real-world datasets are used to evaluate the Graph RAG approach,91\n124,GRAPH RAG,HIERARCHICAL LEVEL OF COMMUNITY SUMMARIES,Hierarchical level of community summaries is varied to evaluate the Graph RAG approach,91\n125,GRAPH RAG,SOURCE TEXT SUMMARIZATION,Graph RAG is compared to source text summarization in the evaluation,91\n128,GRAPH RAG,HIGH-LEVEL COMMUNITY SUMMARIES,High-level community summaries are generated in the Graph RAG approach,91\n130,GRAPH RAG,TECHNIQUES,Techniques are specific methods used in the Graph RAG approach,91\n131,GRAPH RAG,IMPLEMENTATION DETAILS,Implementation details are specific configurations used in the Graph RAG approach,91\n140,GRAPH RAG,MULTI-STAGE,Graph RAG is a multi-stage mechanism,91\n150,GRAPH RAG,ROOT-LEVEL SUMMARIES,Root-level summaries are used in the Graph RAG analysis,91\n155,GRAPH RAG,ITERATIVE RETRIEVAL-GENERATION (ITER-RETGEN),Graph RAG incorporates the concept of iterative retrieval-generation,91\n160,GRAPH RAG,TREE OF CLARIFICATIONS,Graph RAG incorporates the concept of a tree of clarifications,91\n164,GRAPH RAG,\"MAO ET AL., 2020\",\"Graph RAG incorporates concepts from Mao et al., 2020\",91\n165,GRAPH RAG,\"SHAO ET AL., 2023\",\"Graph RAG incorporates concepts from Shao et al., 2023\",91\n166,GRAPH RAG,\"WANG ET AL., 2024\",\"Graph RAG incorporates concepts from Wang et al., 2024\",91\n167,GRAPH RAG,\"SU ET AL., 2020\",\"Graph RAG incorporates concepts from Su et al., 2020\",91\n169,GRAPH RAG,\"TRIVEDI ET AL., 2022\",\"Graph RAG incorporates concepts from Trivedi et al., 2022\",91\n170,GRAPH RAG,\"KHATTAB ET AL., 2022\",\"Graph RAG incorporates concepts from Khattab et al., 2022\",91\n171,GRAPH RAG,\"SARTHI ET AL., 2024\",\"Graph RAG incorporates concepts from Sarthi et al., 2024\",91\n172,GRAPH RAG,\"KIM ET AL., 2023\",\"Graph RAG incorporates concepts from Kim et al., 2023\",91\n176,GRAPH RAG,RICH TEXT ANNOTATIONS,Graph RAG uses rich text annotations,91\n183,GRAPH RAG,LOCAL GRAPH RAG APPROACHES,Graph RAG includes local graph RAG approaches,91\n233,DIVERSITY,PODCAST TRANSCRIPTS,Diversity is used to evaluate the variety in the generated answers for podcast transcripts,26\n232,DIVERSITY,NEWS ARTICLE DATASET,Diversity is used to evaluate the variety in the generated answers for news articles,23\n231,DIVERSITY,LLM EVALUATOR,The LLM evaluator assesses answers based on the diversity metric,18\n234,DIVERSITY,CONTEXT WINDOW SIZE,The smallest context window size (8k) performed comparably with larger context sizes on diversity,16\n235,DIVERSITY,FINAL EVALUATION,The final evaluation prioritized diversity in answers,10\n236,DIVERSITY,GLOBAL APPROACHES,Global approaches achieved higher diversity win rates,10\n502,TEXT SUMMARIZATION,CONDITIONS,Text summarization is one of the conditions compared in the analysis,6\n504,SEMANTIC SEARCH RAG,CONDITIONS,Semantic search RAG is one of the conditions compared in the analysis,5\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 19 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n73,KNOWLEDGE GRAPH,\"A knowledge graph is a structured representation of information, utilized in the Graph RAG approach for summarization. This structured representation of knowledge is specifically employed in the Graph RAG approach for global summarization, highlighting its role in organizing and integrating information to facilitate comprehensive and coherent summaries.\",2\n104,MODULARITY,Modularity is an inherent quality of graphs that allows them to be partitioned into communities of closely-related nodes,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n106,GRAPH RAG,KNOWLEDGE GRAPH,Graph RAG uses a knowledge graph for global summarization,92\n351,KNOWLEDGE GRAPH,MODULARITY,Modularity is an inherent quality of knowledge graphs,3\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 8 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 8 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n258,QUESTION,\"The entity \"\"QUESTION\"\" refers to a specific query used in the evaluation process, particularly as a metric to evaluate the generated responses by asking specific questions. This approach is commonly employed in the domain of Natural Language Processing and Information Retrieval to assess the quality and relevance of responses generated by various models or systems.\",2\n259,PUBLIC FIGURES,\"Public figures are individuals who have gained fame or notoriety in various sectors such as entertainment, sports, and digital media. These individuals are well-known in the entertainment industry and are frequently mentioned across various articles. Their prominence in public discourse spans multiple domains, reflecting their influence and recognition in society.\",5\n303,CONTROVERSIES,Controversies are events or issues involving public figures that generate public debate and impact public discourse.,2\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n90,LLM,QUESTION,LLM-generated responses are evaluated using specific questions,34\n565,PUBLIC FIGURES,ANSWER 1,Answer 1 covers a wide range of public figures from different sectors of the entertainment industry.,16\n566,PUBLIC FIGURES,ANSWER 2,\"Answer 2 focuses on a smaller group of public figures, primarily from the music industry and sports.\",15\n612,ANSWER 1,CONTROVERSIES,Answer 1 provides insights into controversies involving public figures and their impact on public discourse.,13\n564,PUBLIC FIGURES,ENTERTAINMENT ARTICLES,Public figures are repeatedly mentioned across various entertainment articles,11\n567,PUBLIC FIGURES,CONTROVERSIES,Controversies involve public figures and impact public discourse.,7\n563,QUESTION,PUBLIC FIGURES,The question asks about public figures mentioned in entertainment articles,7\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 8 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 8 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n34,TEXT CHUNKS,\"TEXT CHUNKS are segments of text that are embedded into a vector space for analysis. These segments are extracted from source documents and are used for processing in the Graph RAG (Retrieval-Augmented Generation) approach. By embedding these text chunks into a vector space, they can be analyzed more effectively, facilitating various natural language processing and information retrieval tasks.\",5\n129,CHUNK SIZE,Chunk size refers to the length of text chunks used in the extraction process,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n68,LLM,TEXT CHUNKS,Text chunks are processed using LLM to extract elements of a graph index,37\n218,SOURCE DOCUMENTS,TEXT CHUNKS,\"In the domain of Natural Language Processing and Information Retrieval, \"\"SOURCE DOCUMENTS\"\" and \"\"TEXT CHUNKS\"\" are closely related entities. Text chunks are extracted from source documents, specifically for processing in the Graph RAG (Retrieval-Augmented Generation) approach. This method involves breaking down the source documents into smaller, manageable pieces, or text chunks, which can then be effectively utilized in various computational processes, enhancing the efficiency and accuracy of information retrieval and generation tasks.\",10\n254,TEXT CHUNKS,ELEMENT INSTANCES,Element instances are extracted from text chunks,9\n255,TEXT CHUNKS,ENTITY REFERENCES,Entity references are extracted from text chunks during processing,8\n256,TEXT CHUNKS,CHUNK SIZE,Chunk size refers to the length of text chunks used in the extraction process,6\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 7 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 7 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n115,LOW-LEVEL COMMUNITY SUMMARIES,LOW-LEVEL COMMUNITY SUMMARIES are a type of community summary used in the News dataset for analysis. These summaries provide a detailed overview of the source text and are generated from lower hierarchical levels of the community in the knowledge graph.,3\n23,ENTITY KNOWLEDGE GRAPH,An entity knowledge graph is a graph-based representation of entities and their relationships derived from source documents,2\n116,INTERMEDIATE-LEVEL COMMUNITY SUMMARIES,\"INTERMEDIATE-LEVEL COMMUNITY SUMMARIES are summaries that provide a mid-level overview of the source text. These summaries are generated from intermediate hierarchical levels of the community in the knowledge graph, offering a balanced perspective that captures essential details without overwhelming the reader with excessive information. This approach ensures that the summaries are both informative and concise, making them valuable for understanding the structural dynamics and relationships within specialized communities, particularly in the domain of Natural Language Processing and Information Retrieval.\",2\n24,SOURCE DOCUMENTS,\"Source documents are the original texts from which information is extracted, retrieved, or summarized. These documents serve as the foundational input texts for various processing tasks, including the Graph RAG (Retrieval-Augmented Generation) approach. In this context, source documents are critical for extracting and analyzing information, ensuring that the data used in computational linguistics and information retrieval tasks is accurate and comprehensive.\",5\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n126,GRAPH RAG,LOW-LEVEL COMMUNITY SUMMARIES,Low-level community summaries are generated in the Graph RAG approach,93\n103,GRAPH RAG,ENTITY KNOWLEDGE GRAPH,Graph RAG uses an entity knowledge graph to index text,92\n127,GRAPH RAG,INTERMEDIATE-LEVEL COMMUNITY SUMMARIES,Intermediate-level community summaries are generated in the Graph RAG approach,92\n407,LOW-LEVEL COMMUNITY SUMMARIES,NEWS DATASET,Low-level community summaries are derived from the News dataset for analysis,18\n218,SOURCE DOCUMENTS,TEXT CHUNKS,\"In the domain of Natural Language Processing and Information Retrieval, \"\"SOURCE DOCUMENTS\"\" and \"\"TEXT CHUNKS\"\" are closely related entities. Text chunks are extracted from source documents, specifically for processing in the Graph RAG (Retrieval-Augmented Generation) approach. This method involves breaking down the source documents into smaller, manageable pieces, or text chunks, which can then be effectively utilized in various computational processes, enhancing the efficiency and accuracy of information retrieval and generation tasks.\",10\n220,SOURCE DOCUMENTS,LOW-LEVEL COMMUNITY SUMMARIES,Low-level community summaries are derived from source documents,8\n217,ENTITY KNOWLEDGE GRAPH,SOURCE DOCUMENTS,An entity knowledge graph is derived from source documents,7\n219,SOURCE DOCUMENTS,INTERMEDIATE-LEVEL COMMUNITY SUMMARIES,Intermediate-level community summaries are derived from source documents,7\n221,SOURCE DOCUMENTS,DOCUMENT CORPUS,Document corpus consists of source documents being processed,7\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 4 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 4 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n120,ENTITY REFERENCES,\"Entity references are mentions of entities within text chunks, extracted during the processing\",3\n121,RECALL,Recall is a metric used to measure the completeness of entity extraction from text chunks,1\n122,PRECISION,Precision is a metric used to measure the accuracy of entity extraction from text chunks,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n255,TEXT CHUNKS,ENTITY REFERENCES,Entity references are extracted from text chunks during processing,8\n422,ENTITY REFERENCES,RECALL,Recall measures the completeness of entity references extracted from text chunks,4\n423,ENTITY REFERENCES,PRECISION,Precision measures the accuracy of entity references extracted from text chunks,4\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 4 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 4 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n133,DOCUMENT CORPUS,Document corpus refers to the collection of documents being processed in the Graph RAG approach,2\n132,DOMAIN,Domain refers to the specific area of knowledge or field to which the document corpus belongs,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n221,SOURCE DOCUMENTS,DOCUMENT CORPUS,Document corpus consists of source documents being processed,7\n430,DOMAIN,DOCUMENT CORPUS,Domain refers to the specific area of knowledge of the document corpus,3\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 4 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 4 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n15,COMMUNITY SUMMARIES,\"Community summaries are generated summaries of data clusters or communities, used to answer queries and tailored to the domain. These summaries are pre-generated for groups of closely-related entities, particularly in the Graph RAG approach, and are derived from community-generated content to compare with source texts. They are randomly shuffled and divided into chunks of pre-specified token size to ensure relevant information is distributed across chunks. Community summaries provide report-like insights into each community within a hierarchical structure, which is useful for understanding the dataset. They are generated from modular communities in the knowledge graph and cover different levels of each graph community hierarchy, including root-level communities in an entity-based graph index. Additionally, these summaries act as a kind of self-memory for generation-augmented retrieval.\",26\n38,COMMUNITY ANSWERS,\"COMMUNITY ANSWERS are query-focused summaries derived from community summaries. These answers are generated in parallel from the community summaries and are designed to respond to user queries effectively. Essentially, COMMUNITY ANSWERS serve as responses that synthesize information from community summaries to provide concise and relevant answers to specific questions posed by users.\",3\n187,CHUNK,Chunks are segments of community summaries divided into pre-specified token sizes,1\n105,COMMUNITY DESCRIPTIONS,Descriptions generated from modular communities in the knowledge graph,1\n184,SUMMARY DETAIL,Summary detail refers to the level of detail provided in a summary,1\n185,SCOPE,Scope refers to the range or extent of information covered in a summary,1\n192,SUMMARY DETAIL AND SCOPE,Summary detail and scope refer to the balance of detail and range of information in community summaries for sensemaking,1\n421,ROOT-LEVEL COMMUNITIES,The top-level communities in a hierarchical structure,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n99,GRAPH RAG,COMMUNITY SUMMARIES,\"Graph RAG is an approach that utilizes community summaries in various capacities to enhance its functionality. Specifically, community summaries are generated within the Graph RAG framework and are employed to generate partial responses. These summaries are also used to compare against source texts, serving as a form of self-memory for the system. By leveraging community summaries, Graph RAG aims to improve the comprehensiveness and diversity of answers. Additionally, Graph RAG incorporates summaries of root-level communities within an entity-based graph index, further enriching its analytical capabilities.\",116\n173,GRAPH RAG,COMMUNITY ANSWERS,Graph RAG generates community answers in parallel,93\n208,COMMUNITY SUMMARIES,PODCAST DATASET,Community summaries are derived from the Podcast dataset for analysis,41\n209,COMMUNITY SUMMARIES,NEWS DATASET,Community summaries are derived from the News dataset for analysis,41\n192,COMMUNITY SUMMARIES,HIERARCHICAL COMMUNITY STRUCTURE,Community summaries are created for each level in the hierarchical community structure,33\n198,COMMUNITY SUMMARIES,GLOBAL ANSWER,Global answers are generated from community summaries,33\n201,COMMUNITY SUMMARIES,SENSEMAKING,Community summaries are used for sensemaking,33\n193,COMMUNITY SUMMARIES,GLOBAL SUMMARIZATION,Community summaries are useful for understanding the global structure and semantics of the dataset,31\n196,COMMUNITY SUMMARIES,SUB-COMMUNITIES,Community summaries are generated from sub-communities,31\n195,COMMUNITY SUMMARIES,ROOT COMMUNITIES,Community summaries are generated from root communities,30\n207,COMMUNITY SUMMARIES,GRAPH,Community summaries are part of the graph community hierarchy,30\n188,COMMUNITY SUMMARIES,COMMUNITY ANSWERS,\"Community answers are created from community summaries. These answers are generated by synthesizing information from the summaries provided by the community, ensuring that the responses are comprehensive and reflective of the collective knowledge and insights within the community.\",29\n187,COMMUNITY SUMMARIES,GRAPH COMMUNITIES,Community summaries are created from graph communities,29\n204,COMMUNITY SUMMARIES,CHUNKS,Community summaries are divided into chunks,29\n206,COMMUNITY SUMMARIES,INTERMEDIATE ANSWERS,Intermediate answers are generated from community summaries,29\n186,COMMUNITY SUMMARIES,PARTIAL RESPONSE,Community summaries are used to generate partial responses,28\n189,COMMUNITY SUMMARIES,DOMAIN-TAILORED SUMMARIZATION,Domain-tailored summarization is used to create community summaries,28\n191,COMMUNITY SUMMARIES,PARTIAL ANSWERS,Partial answers are generated from community summaries,28\n194,COMMUNITY SUMMARIES,GLOBAL QUERIES,Community summaries are used to answer global queries,28\n197,COMMUNITY SUMMARIES,LLM CONTEXT WINDOW,Community summaries are added to the LLM context window until the token limit is reached,28\n205,COMMUNITY SUMMARIES,USER QUERY,Community summaries are prepared to answer user queries,28\n202,COMMUNITY SUMMARIES,CHUNK,Community summaries are divided into chunks of pre-specified token size,27\n190,COMMUNITY SUMMARIES,COMMUNITY DESCRIPTIONS,Community descriptions are generated from community summaries,27\n199,COMMUNITY SUMMARIES,SUMMARY DETAIL,The level of summary detail affects the content of community summaries,27\n200,COMMUNITY SUMMARIES,SCOPE,The scope of information affects the content of community summaries,27\n203,COMMUNITY SUMMARIES,SUMMARY DETAIL AND SCOPE,Summary detail and scope affect the content of community summaries,27\n210,COMMUNITY SUMMARIES,ROOT-LEVEL COMMUNITIES,Summaries of root-level communities are used in Graph RAG,27\n269,COMMUNITY ANSWERS,GLOBAL ANSWER,Global answer is created from community answers,10\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n216,MT-BENCH,\"MT-BENCH is a benchmark dataset designed for open-domain question answering, specifically targeting explicit fact retrieval. It serves as a critical tool in evaluating the performance of models in retrieving accurate and relevant information from a broad range of topics. MT-Bench is prominently featured in the academic paper titled \"\"Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena,\"\" where it is utilized to assess the capabilities of large language models in a structured and rigorous manner. This dataset plays a significant role in advancing the field of Natural Language Processing and Information Retrieval by providing a standardized metric for model comparison and evaluation.\",12\n223,ZHENG ET AL.,Authors associated with the MT-Bench dataset,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n495,MT-BENCH,\"LI, Z.\",\"Li, Z. is an author of the paper that discusses MT-Bench\",32\n491,MT-BENCH,\"ZHUANG, S.\",\"Zhuang, S. is an author of the paper that discusses MT-Bench\",27\n488,MT-BENCH,\"ZHENG, L.\",\"Zheng, L. is an author of the paper that discusses MT-Bench\",24\n489,MT-BENCH,\"CHIANG, W.-L.\",\"Chiang, W.-L. is an author of the paper that discusses MT-Bench\",24\n490,MT-BENCH,\"SHENG, Y.\",\"Sheng, Y. is an author of the paper that discusses MT-Bench\",24\n492,MT-BENCH,\"WU, Z.\",\"Wu, Z. is an author of the paper that discusses MT-Bench\",24\n493,MT-BENCH,\"ZHUANG, Y.\",\"Zhuang, Y. is an author of the paper that discusses MT-Bench\",24\n494,MT-BENCH,\"LIN, Z.\",\"Lin, Z. is an author of the paper that discusses MT-Bench\",24\n496,MT-BENCH,\"LI, D.\",\"Li, D. is an author of the paper that discusses MT-Bench\",24\n497,MT-BENCH,\"XING, E.\",\"Xing, E. is an author of the paper that discusses MT-Bench\",24\n498,MT-BENCH,CHATBOT ARENA,\"MT-Bench and Chatbot Arena are both tools used in the paper \"\"Judging llm-as-a-judge with mt-bench and chatbot arena\"\"\",23\n487,MT-BENCH,ZHENG ET AL.,Zheng et al. are the authors associated with the MT-Bench dataset,13\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n280,TRAVIS KELCE,\"Travis Kelce is a public figure frequently mentioned in entertainment articles, known for his contributions to the sports industry and his high-profile personal life.\",6\n293,SPORTS,\"The entity \"\"SPORTS\"\" refers to a sector within the entertainment industry that encompasses athletic events and competitions. This sector includes public figures involved in sports, such as athletes, coaches, and sports commentators.\",4\n\n\n-----Claims-----\nhuman_readable_id,subject_id,type,status,description\n34,TRAVIS KELCE,PUBLIC INTEREST,TRUE,Travis Kelce is frequently mentioned in entertainment articles due to his high-profile status and the public’s interest in his career and personal life.\n39,TRAVIS KELCE,FREQUENT MENTIONS,TRUE,Travis Kelce is repeatedly mentioned across various entertainment articles.\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n142,GRAPH RAG,TRAVIS KELCE,Graph RAG mentions Travis Kelce as a prominent public figure,96\n574,ENTERTAINMENT INDUSTRY,TRAVIS KELCE,Travis Kelce is a significant figure in the entertainment industry,25\n585,ENTERTAINMENT INDUSTRY,SPORTS,Sports is a sector within the entertainment industry,23\n394,NAIVE RAG,TRAVIS KELCE,Naive RAG mentions Travis Kelce as a public figure,19\n598,TRAVIS KELCE,ANSWER 2,Travis Kelce is one of the specific public figures mentioned in Answer 2.,16\n608,SPORTS,ANSWER 1,Answer 1 includes public figures from the sports sector.,15\n609,SPORTS,ANSWER 2,Answer 2 focuses on public figures primarily from the sports sector.,14\n570,ENTERTAINMENT ARTICLES,TRAVIS KELCE,Travis Kelce is frequently mentioned in entertainment articles,12\n599,TRAVIS KELCE,SPORTS,Travis Kelce is a public figure in the sports sector.,10\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n108,PARTIAL ANSWERS,Intermediate answers generated from community summaries before being combined into a final global answer,2\n109,FINAL GLOBAL ANSWER,The comprehensive answer generated by combining all relevant partial answers,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n191,COMMUNITY SUMMARIES,PARTIAL ANSWERS,Partial answers are generated from community summaries,28\n405,PARTIAL ANSWERS,FINAL GLOBAL ANSWER,Final global answer is generated by combining all relevant partial answers,3\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 20 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 20 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n194,CHUNKS,Chunks are segments of community summaries divided based on a pre-specified token size,3\n209,TOKEN SIZE,The pre-specified size of tokens used to divide community summaries into chunks,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n84,LLM,CHUNKS,LLM generates intermediate answers and scores for each chunk,35\n204,COMMUNITY SUMMARIES,CHUNKS,Community summaries are divided into chunks,29\n470,CHUNKS,TOKEN SIZE,Chunks are divided based on a pre-specified token size,4\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 17 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 17 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n195,HELPFULNESS SCORE,A score between 0-100 generated by the LLM to indicate how helpful an answer is in addressing the target question,3\n39,GLOBAL ANSWER,GLOBAL ANSWER is a comprehensive response generated from multiple community summaries to answer a user query. It is the final query-focused summary produced from all relevant community summaries. The final answer is generated by combining intermediate community answers based on their helpfulness scores.,7\n208,INTERMEDIATE ANSWERS,Answers generated for each chunk of community summaries,3\n186,USER QUERY,\"A \"\"USER QUERY\"\" is a question or inquiry posed by a user seeking information, which the system aims to answer.\",2\n210,CONTEXT WINDOW,\"The \"\"CONTEXT WINDOW\"\" refers to a window of text used to generate answers, constrained by token size. The size of the context window is consistent across all conditions, ensuring uniformity in answer generation processes.\",2\n239,PROMPTS,\"The prompts used for answer generation, which are the same across all conditions with minor modifications\",1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n85,LLM,HELPFULNESS SCORE,LLM generates a helpfulness score for each answer,35\n198,COMMUNITY SUMMARIES,GLOBAL ANSWER,Global answers are generated from community summaries,33\n206,COMMUNITY SUMMARIES,INTERMEDIATE ANSWERS,Intermediate answers are generated from community summaries,29\n205,COMMUNITY SUMMARIES,USER QUERY,Community summaries are prepared to answer user queries,28\n214,QUERY-FOCUSED SUMMARIZATION,GLOBAL ANSWER,Query-focused summarization is used to produce the global answer,12\n271,GLOBAL ANSWER,HELPFULNESS SCORE,Global answer is generated by sorting intermediate answers based on helpfulness scores,10\n272,GLOBAL ANSWER,INTERMEDIATE ANSWERS,Intermediate answers are combined to form the global answer,10\n269,COMMUNITY ANSWERS,GLOBAL ANSWER,Global answer is created from community answers,10\n273,GLOBAL ANSWER,CONTEXT WINDOW,The final context window is used to generate the global answer,9\n270,GLOBAL ANSWER,USER QUERY,Global answers are generated in response to user queries,9\n471,HELPFULNESS SCORE,INTERMEDIATE ANSWERS,Helpfulness scores are assigned to intermediate answers,6\n482,CONTEXT WINDOW,PROMPTS,The size of the context window and the prompts used for answer generation are the same across all conditions,3\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 15 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 15 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n339,MULTI-DOCUMENT SUMMARIZATION,A method that combines multiple concepts for summarizing multiple documents,2\n360,MULTI-DOCUMENT SUMMARIZATION (CAIRE-COVID),A system that combines multiple concepts for multi-document summarization,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n157,GRAPH RAG,MULTI-DOCUMENT SUMMARIZATION,Graph RAG incorporates concepts used in multi-document summarization,92\n631,MULTI-DOCUMENT SUMMARIZATION,MULTI-DOCUMENT SUMMARIZATION (CAIRE-COVID),CAiRE-COVID is a system for multi-document summarization,3\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 12 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 12 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n88,COMMUNITY DETECTION ALGORITHMS,\"COMMUNITY DETECTION ALGORITHMS are algorithms used to partition a graph into communities of nodes with stronger connections to one another. These algorithms are designed to identify modular communities of closely-related nodes within a graph, thereby revealing the underlying structure and relationships within the network.\",6\n46,LEIDEN,\"LEIDEN is a community detection algorithm renowned for its efficiency in recovering hierarchical community structures. It is widely used to partition graphs into modular communities, effectively grouping elements within a graph index. The algorithm's ability to identify and organize these communities makes it a valuable tool in the analysis of complex networks, particularly within the domains of Natural Language Processing and Information Retrieval.\",7\n174,FIGURE 3,A visual representation of graph communities detected using the Leiden algorithm,1\n53,TRAAG,Traag is an author who contributed to the development of the Leiden community detection method,1\n66,TRAAG ET AL.,\"Traag et al. are the authors who developed the Leiden algorithm, a method renowned for its efficiency in recovering hierarchical community structures. This algorithm is widely recognized in the field of Natural Language Processing and Information Retrieval for its ability to accurately detect and map out complex community dynamics.\",1\n89,LOUVAIN,Louvain is a community detection algorithm used to partition graphs into modular communities,1\n163,FORTUNATO,An author who has conducted surveys on community detection algorithms,1\n164,JIN ET AL.,Authors who have conducted surveys on community detection algorithms,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n107,GRAPH RAG,COMMUNITY DETECTION ALGORITHMS,Community detection algorithms are used in the Graph RAG approach to partition graphs,96\n356,COMMUNITY DETECTION ALGORITHMS,GRAPH INDEX,Community detection algorithms are used to partition the graph index into communities,24\n289,LEIDEN,MULTIHOP-RAG,The Leiden algorithm is used to detect graph communities in the MultiHop-RAG,15\n288,LEIDEN,HIERARCHICAL COMMUNITY STRUCTURE,Leiden is known for its ability to recover hierarchical community structures efficiently,14\n279,GRAPH RAG PIPELINE,LEIDEN,Leiden method is used in the graph RAG pipeline for community detection,14\n287,LEIDEN,COMMUNITY DETECTION ALGORITHMS,\"Leiden is a specific type of community detection algorithm used in various analytical pipelines. It is designed to identify and map out the structural dynamics within specialized communities, particularly in the domain of Natural Language Processing and Information Retrieval. The algorithm is known for its efficiency and accuracy in detecting community structures, making it a valuable tool for researchers and practitioners in the field.\",13\n290,LEIDEN,FIGURE 3,Figure 3 shows graph communities detected using the Leiden algorithm,8\n285,LEIDEN,TRAAG,Traag contributed to the development of the Leiden method,8\n286,LEIDEN,TRAAG ET AL.,Traag et al. are the authors of the Leiden algorithm and developed the Leiden method.,8\n355,COMMUNITY DETECTION ALGORITHMS,LOUVAIN,Louvain is a type of community detection algorithm,7\n357,COMMUNITY DETECTION ALGORITHMS,FORTUNATO,Fortunato has conducted surveys on community detection algorithms,7\n358,COMMUNITY DETECTION ALGORITHMS,JIN ET AL.,Jin et al. have conducted surveys on community detection algorithms,7\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 9 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 9 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n15,COMMUNITY SUMMARIES,\"Community summaries are generated summaries of data clusters or communities, used to answer queries and tailored to the domain. These summaries are pre-generated for groups of closely-related entities, particularly in the Graph RAG approach, and are derived from community-generated content to compare with source texts. They are randomly shuffled and divided into chunks of pre-specified token size to ensure relevant information is distributed across chunks. Community summaries provide report-like insights into each community within a hierarchical structure, which is useful for understanding the dataset. They are generated from modular communities in the knowledge graph and cover different levels of each graph community hierarchy, including root-level communities in an entity-based graph index. Additionally, these summaries act as a kind of self-memory for generation-augmented retrieval.\",26\n38,COMMUNITY ANSWERS,\"COMMUNITY ANSWERS are query-focused summaries derived from community summaries. These answers are generated in parallel from the community summaries and are designed to respond to user queries effectively. Essentially, COMMUNITY ANSWERS serve as responses that synthesize information from community summaries to provide concise and relevant answers to specific questions posed by users.\",3\n25,PARTIAL RESPONSE,A partial response is an intermediate answer generated from community summaries before being combined into a final response,2\n108,PARTIAL ANSWERS,Intermediate answers generated from community summaries before being combined into a final global answer,2\n187,CHUNK,Chunks are segments of community summaries divided into pre-specified token sizes,1\n105,COMMUNITY DESCRIPTIONS,Descriptions generated from modular communities in the knowledge graph,1\n184,SUMMARY DETAIL,Summary detail refers to the level of detail provided in a summary,1\n185,SCOPE,Scope refers to the range or extent of information covered in a summary,1\n192,SUMMARY DETAIL AND SCOPE,Summary detail and scope refer to the balance of detail and range of information in community summaries for sensemaking,1\n421,ROOT-LEVEL COMMUNITIES,The top-level communities in a hierarchical structure,1\n109,FINAL GLOBAL ANSWER,The comprehensive answer generated by combining all relevant partial answers,1\n26,FINAL RESPONSE,A final response is the comprehensive answer generated after combining all partial responses,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n99,GRAPH RAG,COMMUNITY SUMMARIES,\"Graph RAG is an approach that utilizes community summaries in various capacities to enhance its functionality. Specifically, community summaries are generated within the Graph RAG framework and are employed to generate partial responses. These summaries are also used to compare against source texts, serving as a form of self-memory for the system. By leveraging community summaries, Graph RAG aims to improve the comprehensiveness and diversity of answers. Additionally, Graph RAG incorporates summaries of root-level communities within an entity-based graph index, further enriching its analytical capabilities.\",116\n173,GRAPH RAG,COMMUNITY ANSWERS,Graph RAG generates community answers in parallel,93\n208,COMMUNITY SUMMARIES,PODCAST DATASET,Community summaries are derived from the Podcast dataset for analysis,41\n209,COMMUNITY SUMMARIES,NEWS DATASET,Community summaries are derived from the News dataset for analysis,41\n192,COMMUNITY SUMMARIES,HIERARCHICAL COMMUNITY STRUCTURE,Community summaries are created for each level in the hierarchical community structure,33\n198,COMMUNITY SUMMARIES,GLOBAL ANSWER,Global answers are generated from community summaries,33\n201,COMMUNITY SUMMARIES,SENSEMAKING,Community summaries are used for sensemaking,33\n193,COMMUNITY SUMMARIES,GLOBAL SUMMARIZATION,Community summaries are useful for understanding the global structure and semantics of the dataset,31\n196,COMMUNITY SUMMARIES,SUB-COMMUNITIES,Community summaries are generated from sub-communities,31\n195,COMMUNITY SUMMARIES,ROOT COMMUNITIES,Community summaries are generated from root communities,30\n207,COMMUNITY SUMMARIES,GRAPH,Community summaries are part of the graph community hierarchy,30\n188,COMMUNITY SUMMARIES,COMMUNITY ANSWERS,\"Community answers are created from community summaries. These answers are generated by synthesizing information from the summaries provided by the community, ensuring that the responses are comprehensive and reflective of the collective knowledge and insights within the community.\",29\n187,COMMUNITY SUMMARIES,GRAPH COMMUNITIES,Community summaries are created from graph communities,29\n204,COMMUNITY SUMMARIES,CHUNKS,Community summaries are divided into chunks,29\n206,COMMUNITY SUMMARIES,INTERMEDIATE ANSWERS,Intermediate answers are generated from community summaries,29\n186,COMMUNITY SUMMARIES,PARTIAL RESPONSE,Community summaries are used to generate partial responses,28\n189,COMMUNITY SUMMARIES,DOMAIN-TAILORED SUMMARIZATION,Domain-tailored summarization is used to create community summaries,28\n191,COMMUNITY SUMMARIES,PARTIAL ANSWERS,Partial answers are generated from community summaries,28\n194,COMMUNITY SUMMARIES,GLOBAL QUERIES,Community summaries are used to answer global queries,28\n197,COMMUNITY SUMMARIES,LLM CONTEXT WINDOW,Community summaries are added to the LLM context window until the token limit is reached,28\n205,COMMUNITY SUMMARIES,USER QUERY,Community summaries are prepared to answer user queries,28\n202,COMMUNITY SUMMARIES,CHUNK,Community summaries are divided into chunks of pre-specified token size,27\n190,COMMUNITY SUMMARIES,COMMUNITY DESCRIPTIONS,Community descriptions are generated from community summaries,27\n199,COMMUNITY SUMMARIES,SUMMARY DETAIL,The level of summary detail affects the content of community summaries,27\n200,COMMUNITY SUMMARIES,SCOPE,The scope of information affects the content of community summaries,27\n203,COMMUNITY SUMMARIES,SUMMARY DETAIL AND SCOPE,Summary detail and scope affect the content of community summaries,27\n210,COMMUNITY SUMMARIES,ROOT-LEVEL COMMUNITIES,Summaries of root-level communities are used in Graph RAG,27\n269,COMMUNITY ANSWERS,GLOBAL ANSWER,Global answer is created from community answers,10\n405,PARTIAL ANSWERS,FINAL GLOBAL ANSWER,Final global answer is generated by combining all relevant partial answers,3\n222,PARTIAL RESPONSE,FINAL RESPONSE,Partial responses are summarized to generate a final response,3\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 7 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 7 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n404,HYBRID RAG SCHEMES,RAG schemes that combine embedding-based matching with other approaches,2\n417,COMMUNITY REPORTS,Reports generated from community summaries,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n179,GRAPH RAG,HYBRID RAG SCHEMES,Graph RAG can be part of hybrid RAG schemes,92\n654,HYBRID RAG SCHEMES,COMMUNITY REPORTS,Hybrid RAG schemes combine embedding-based matching against community reports,3\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 5 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 5 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n181,LLM CONTEXT WINDOW,The LLM context window is the token limit within which summaries are added for processing by a language model,2\n183,TOKEN LIMIT,The token limit is the maximum number of tokens that can be processed in a single context window by a language model,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n197,COMMUNITY SUMMARIES,LLM CONTEXT WINDOW,Community summaries are added to the LLM context window until the token limit is reached,28\n467,LLM CONTEXT WINDOW,TOKEN LIMIT,The token limit defines the maximum number of tokens in the LLM context window,3\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 3 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 3 seconds. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n510,\"ES, S.\",\"Es, S. is an author of the paper \"\"Ragas: Automated evaluation of retrieval augmented generation\"\"\",2\n512,\"ESPINOSA-ANKE, L.\",\"Espinosa-Anke, L. is an author of the paper \"\"Ragas: Automated evaluation of retrieval augmented generation\"\"\",2\n511,\"JAMES, J.\",\"James, J. is an author of the paper \"\"Ragas: Automated evaluation of retrieval augmented generation\"\"\",2\n513,\"SCHOCKAERT, S.\",\"Schockaert, S. is an author of the paper \"\"Ragas: Automated evaluation of retrieval augmented generation\"\"\",2\n530,ARXIV:2309.15217,\"The arXiv identifier for the paper \"\"Ragas: Automated evaluation of retrieval augmented generation\"\"\",4\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n300,ARXIV,\"ES, S.\",\"Es, S. published the paper \"\"Ragas: Automated evaluation of retrieval augmented generation\"\" on arXiv\",41\n302,ARXIV,\"ESPINOSA-ANKE, L.\",\"Espinosa-Anke, L. published the paper \"\"Ragas: Automated evaluation of retrieval augmented generation\"\" on arXiv\",41\n301,ARXIV,\"JAMES, J.\",\"James, J. published the paper \"\"Ragas: Automated evaluation of retrieval augmented generation\"\" on arXiv\",41\n303,ARXIV,\"SCHOCKAERT, S.\",\"Schockaert, S. published the paper \"\"Ragas: Automated evaluation of retrieval augmented generation\"\" on arXiv\",41\n826,\"ES, S.\",ARXIV:2309.15217,\"Es, S. is an author of the paper with arXiv identifier 2309.15217\",6\n827,\"JAMES, J.\",ARXIV:2309.15217,\"James, J. is an author of the paper with arXiv identifier 2309.15217\",6\n828,\"ESPINOSA-ANKE, L.\",ARXIV:2309.15217,\"Espinosa-Anke, L. is an author of the paper with arXiv identifier 2309.15217\",6\n829,\"SCHOCKAERT, S.\",ARXIV:2309.15217,\"Schockaert, S. is an author of the paper with arXiv identifier 2309.15217\",6\n\nOutput:"}}
{"type": "error", "data": "Error Invoking LLM", "stack": "Traceback (most recent call last):\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/base/base_llm.py\", line 53, in _invoke\n    output = await self._execute_llm(input, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/graphrag/llm/openai/openai_chat_llm.py\", line 53, in _execute_llm\n    completion = await self.client.chat.completions.create(\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/resources/chat/completions.py\", line 1339, in create\n    return await self._post(\n           ^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1816, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1510, in request\n    return await self._request(\n           ^^^^^^^^^^^^^^^^^^^^\n  File \"/workspaces/GraphFleet/.venv/lib/python3.11/site-packages/openai/_base_client.py\", line 1611, in _request\n    raise self._make_status_error_from_response(err.response) from None\nopenai.RateLimitError: Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}\n", "source": "Error code: 429 - {'error': {'code': '429', 'message': 'Requests to the ChatCompletions_Create Operation under Azure OpenAI API version 2024-04-01-preview have exceeded token rate limit of your current OpenAI S0 pricing tier. Please retry after 1 second. Please go here: https://aka.ms/oai/quotaincrease if you would like to further increase the default rate limit.'}}", "details": {"input": "\nYou are an expert in computational linguistics and data science. You are skilled at analyzing complex text data, mapping out relationships, and understanding the structural dynamics within specialized communities. You are adept at helping people identify the relations and structure of the community of interest, specifically within the \"Natural Language Processing and Information Retrieval\" domain.\n\n# Goal\nWrite a comprehensive assessment report of a community taking on the role of a A community analyst that is examining the \"Natural Language Processing and Information Retrieval\" domain, given a list of entities that belong to the community as well as their relationships and optional associated claims.\nThe analysis will be used to inform researchers and practitioners about significant trends, key contributors, and emerging technologies within the community and their potential impact.\n\nDomain: \"Natural Language Processing and Information Retrieval\"\nText: results,\ni.e., that na ¨ıve RAG produces the most direct responses across all comparisons.\n9Podcast Transcripts News Articles\nC0 C1 C2 C3 TS C0 C1 C2 C3 TS\nUnits 34 367 969 1310 1669 55 555 1797 2142 3197\nTokens 26657 225756 565720 746100 1014611 39770 352641 980898 1140266 1707694\n% Max 2.6 22.2 55.8 73.5 100 2.3 20.7 57.4 66.8 100\nTable 3: Number of context units (community summaries for C0-C3 and text chunks for TS), corre-\nsponding token counts, and percentage of the maximum token count. Map-reduce summarization of\nsource texts is the most  , 21(5):88–92.\nKoesten, L., Gregory, K., Groth, P., and Simperl, E. (2021). Talking datasets–understanding data\nsensemaking behaviours. International journal of human-computer studies , 146:102562.\nKuratov, Y ., Bulatov, A., Anokhin, P., Sorokin, D., Sorokin, A., and Burtsev, M. (2024). In search\nof needles in a 11m haystack: Recurrent memory finds what llms miss.\nLangChain (2024). Langchain graphs. https://python .langchain .com/docs/use cases/graph/.\nLaskar, M. T. R., Hoque, E., and Huang, J. (2020). Query focused abstractive summarization via\nincorporating query relevance and transfer learning with transformer models. In Advances in\nArtificial Intelligence:   system for covid-19 scholarly\ninformation management. arXiv preprint arXiv:2005.03975 .\nTang, Y . and Yang, Y . (2024). MultiHop-RAG: Benchmarking retrieval-augmented generation for\nmulti-hop queries. arXiv preprint arXiv:2401.15391 .\nTouvron, H., Martin, L., Stone, K., Albert, P., Almahairi, A., Babaei, Y ., Bashlykov, N., Batra, S.,\nBhargava, P., Bhosale, S., et al. (2023). Llama 2: Open foundation and fine-tuned chat models.\narXiv preprint arXiv:2307.09288 .\nTraag, V . A., Waltman, L., and Van Eck, N. J. (2019). From Louvain to Leiden: guaranteeing\nwell . arXiv preprint arXiv:2306.04136 .\nBan, T., Chen, L., Wang, X., and Chen, H. (2023). From query tools to causal architects: Harnessing\nlarge language models for advanced causal discovery from data.\nBaumel, T., Eyal, M., and Elhadad, M. (2018). Query focused abstractive summarization: Incorpo-\nrating query relevance, multi-document coverage, and summary length constraints into seq2seq\nmodels. arXiv preprint arXiv:1801.07704 .\nBlondel, V . D., Guillaume, J.-L., Lambiotte, R., and Lefebvre, E. (2008). Fast unfolding of\ncommunities in large networks. Journal of statistical mechanics: theory and experiment ,\n2008(10):P10008.\nBrown, T., Mann, B., Ryder, N., Subbia  are the same across\nall six conditions (except for minor modifications to reference styles to match the types of context\ninformation used). Conditions only differ in how the contents of the context window are created.\nThe graph index supporting conditions C0-C3was created using our generic prompts for entity and\nrelationship extraction only, with entity types and few-shot examples tailored to the domain of the\ndata. The graph indexing process used a context window size of 600 tokens with 1 gleaning for the\nPodcast dataset and 0 gleanings for the News dataset.\n3.4 Metrics\nLLMs have been shown to be good evaluators of natural language generation, achieving state-of-\nthe-art or competitive results compared against human judgements (Wang et al., 2023a; Zheng et al.,\n2024). While this approach can generate reference-based metrics when gold standard answers are\nknown, it is also capable of measuring the qualities of generated texts (e.g., fluency) in The next step is to create report-like summaries of each community in the Leiden hierarchy, using\na method designed to scale to very large datasets. These summaries are independently useful in\ntheir own right as a way to understand the global structure and semantics of the dataset, and may\nthemselves be used to make sense of a corpus in the absence of a question. For example, a user\nmay scan through community summaries at one level looking for general themes of interest, then\nfollow links to the reports at the lower level that provide more details for each of the subtopics. Here,\nhowever, we focus on their utility as part of a graph-based index used for answering global queries.\nCommunity summaries are generated in the following way:\n4(a) Root communities at level 0 (b) Sub-communities at level 1\nFigure 3: Graph communities detected using the Leiden algorithm (Traag et al., 2019) over the\nMultiHop-RAG (T  LLM-generated assessment.\n7Question Which public figures are repeatedly mentioned across various entertainment articles?\nGraph\nRAGOverview of Prominent Public Figures in Entertainment\nThe entertainment industry is vast and diverse, encompassing film, television, music, sports, and\ndigital media. Certain public figures stand out due to their significant contributions and influence\nacross these sectors. The following summary highlights key individuals who are repeatedly\nmentioned in various entertainment articles, reflecting their impact and presence within the industry.\nActors and Directors [...]Public Figures in Controversy [...]Musicians and Executives [...]\nAthletes and Coaches [...]Influencers and Entrepreneurs [...]\nThe repeated mention of these figures in entertainment articles signifies their ongoing relevance and\nthe public’s interest in their work. Their influence spans across various aspects of entertainment, from\nshaping cultural narratives in film and television to driving trends in music and digital media. These\nindividuals not only contribute to their respective fields but also influence the broader cultural , query-focused abstractive summarization that generates natural language summaries and\nnot just concatenated excerpts (Baumel et al., 2018; Laskar et al., 2020; Yao et al., 2017) . In recent\nyears, however, such distinctions between summarization tasks that are abstractive versus extractive,\ngeneric versus query-focused, and single-document versus multi-document, have become less rele-\nvant. While early applications of the transformer architecture showed substantial improvements on\nthe state-of-the-art for all such summarization tasks (Goodwin et al., 2020; Laskar et al., 2022; Liu\nand Lapata, 2019), these tasks are now trivialized by modern LLMs, including the GPT (Achiam\net al., 2023; Brown et al., 2020), Llama (Touvron et al., 2023), and Gemini (Anil et al.,  diverse\nanswers, we therefore used a fixed context window size of 8k tokens for the final evaluation.\n3.6 Results\nThe indexing process resulted in a graph consisting of 8564 nodes and 20691 edges for the Podcast\ndataset, and a larger graph of 15754 nodes and 19520 edges for the News dataset. Table 3 shows the\nnumber of community summaries at different levels of each graph community hierarchy.\nGlobal approaches vs. na ¨ıve RAG . As shown in Figure 4, global approaches consistently out-\nperformed the na ¨ıve RAG ( SS) approach in both comprehensiveness and diversity metrics across\ndatasets. Specifically, global approaches achieved comprehensiveness win rates between 72-83%\nfor Podcast transcripts and 72-80% for News articles, while diversity win rates ranged from 75-82%\nand 62-71% respectively. Our use of directness as a validity test also achieved the expected  generated by the LLM based on short\ndescriptions of the target datasets. Questions target global understanding rather than specific details.\n3 Evaluation\n3.1 Datasets\nWe selected two datasets in the one million token range, each equivalent to about 10 novels of text\nand representative of the kind of corpora that users may encounter in their real world activities:\n•Podcast transcripts . Compiled transcripts of podcast conversations between Kevin Scott,\nMicrosoft CTO, and other technology leaders (Behind the Tech, Scott, 2024). Size: 1669\n×600-token text chunks, with 100-token overlaps between chunks ( ∼1 million tokens).\n•News articles . Benchmark dataset comprising news articles published from September\n2013 to December 2023 in a range of categories, including entertainment, business, sports,\ntechnology, health, and science (MultiHop-RAG; Tang and Yang, 2024). Size: 3197 ×\n600-token text chunks, with 100  view the role of policy and regulation\nQuestions :\n1. Which episodes deal primarily with tech policy and government regulation?\n2. How do guests perceive the impact of privacy laws on technology development?\n3. Do any guests discuss the balance between innovation and ethical considerations?\n4. What are the suggested changes to current policies mentioned by the guests?\n5. Are collaborations between tech companies and governments discussed and how?\nNews\narticlesUser : Educator incorporating current affairs into curricula\nTask: Teaching about health and wellness\nQuestions :\n1. What current topics in health can be integrated into health education curricula?\n2. How do news articles address the concepts of preventive medicine and wellness?\n3. Are there examples of health articles that contradict each other, and if so, why?\n4. What insights can be gleaned about public health priorities based on news coverage?\n5. How can educators use the dataset to highlight the importance of health literacy?\nTable 1: Examples of potential users, tasks, and questions  public figures, primarily from the music industry\nand sports, and relies heavily on a single source for data, which makes it less diverse in perspectives\nand insights.\nEmpowerment: Winner=1 (Graph RAG)\nAnswer 1 is better because it provides a comprehensive and structured overview of public figures\nacross various sectors of the entertainment industry, including film, television, music, sports, and\ndigital media. It lists multiple individuals, providing specific examples of their contributions and the\ncontext in which they are mentioned in entertainment articles, along with references to data reports\nfor each claim. This approach helps the reader understand the breadth of the topic and make informed\njudgments without being misled. In contrast, Answer 2 focuses on a smaller group of public figures\nand primarily discusses their personal lives and relationships, which may not provide as broad an\nunderstanding of the topic. While Answer 2 also cites sources, it does not match the depth and variety\nof Answer 1  final round of\nquery-focused summarization over all community summaries reporting relevance to that query.\n“a motivated, continuous effort to understand connections (which can be among people, places, and\nevents) in order to anticipate their trajectories and act effectively ” (Klein et al., 2006a). Supporting\nhuman-led sensemaking over entire text corpora, however, needs a way for people to both apply and\nrefine their mental model of the data (Klein et al., 2006b) by asking questions of a global nature.\nRetrieval-augmented generation (RAG, Lewis et al., 2020) is an established approach to answering\nuser questions over entire datasets, but it is designed for situations where these answers are contained\nlocally within regions of text whose retrieval provides sufficient grounding for the generation task.\nInstead, a more appropriate task framing is query-focused summarization (QFS, Dang, 2006), and in\nparticular  examples provided to the LLM for in-context learning (Brown et al., 2020).\n3For example, while our default prompt extracting the broad class of “named entities” like people,\nplaces, and organizations is generally applicable, domains with specialized knowledge (e.g., science,\nmedicine, law) will benefit from few-shot examples specialized to those domains. We also support\na secondary extraction prompt for any additional covariates we would like to associate with the\nextracted node instances. Our default covariate prompt aims to extract claims linked to detected\nentities, including the subject, object, type, description, source text span, and start and end dates.\nTo balance the needs of efficiency and quality, we use multiple rounds of “gleanings”, up to a\nspecified maximum, to encourage the LLM to detect any additional entities it may have missed\non prior extraction rounds. This is a multi-stage process in which we first ask the LLM to assess\nwhether all entities  resource-intensive approach requiring the highest number of context tokens.\nRoot-level community summaries ( C0) require dramatically fewer tokens per query (9x-43x).\nCommunity summaries vs. source texts. When comparing community summaries to source texts\nusing Graph RAG, community summaries generally provided a small but consistent improvement\nin answer comprehensiveness and diversity, except for root-level summaries. Intermediate-level\nsummaries in the Podcast dataset and low-level community summaries in the News dataset achieved\ncomprehensiveness win rates of 57% and 64%, respectively. Diversity win rates were 57% for\nPodcast intermediate-level summaries and 60% for News low-level community summaries. Table 3\nalso illustrates the scalability advantages of Graph RAG compared to source text summarization: for\nlow-level community summaries ( C3), Graph RAG required 26-33% fewer context tokens, while\nfor root-level community summaries ( C0), it required over 97% fewer tokens.\nRole:. The content of this report includes an overview of the community's key entities and relationships.\n\n# Report Structure\nThe report should include the following sections:\n- TITLE: community's name that represents its key entities - title should be short but specific. When possible, include representative named entities in the title.\n- SUMMARY: An executive summary of the community's overall structure, how its entities are related to each other, and significant points associated with its entities.\n- REPORT RATING: A float score between 0-10 that represents the relevance of the text to computational linguistics, data science, and the structural dynamics within specialized communities, with 1 being trivial or irrelevant and 10 being highly significant, impactful, and actionable in advancing the understanding of Natural Language Processing and Information Retrieval.\n- RATING EXPLANATION: Give a single sentence explanation of the rating.\n- DETAILED FINDINGS: A list of 5-10 key insights about the community. Each insight should have a short summary followed by multiple paragraphs of explanatory text grounded according to the grounding rules below. Be comprehensive.\n\nReturn output as a well-formed JSON-formatted string with the following format. Don't use any unnecessary escape sequences. The output should be a single JSON object that can be parsed by json.loads.\n    {\n        \"title\": \"<report_title>\",\n        \"summary\": \"<executive_summary>\",\n        \"rating\": <threat_severity_rating>,\n        \"rating_explanation\": \"<rating_explanation>\"\n        \"findings\": \"[{\"summary\":\"<insight_1_summary>\", \"explanation\": \"<insight_1_explanation\"}, {\"summary\":\"<insight_2_summary>\", \"explanation\": \"<insight_2_explanation\"}]\"\n    }\n\n# Grounding Rules\nAfter each paragraph, add data record reference if the content of the paragraph was derived from one or more data records. Reference is in the format of [records: <record_source> (<record_id_list>, ...<record_source> (<record_id_list>)]. If there are more than 10 data records, show the top 10 most relevant records.\nEach paragraph should contain multiple sentences of explanation and concrete examples with specific named entities. All paragraphs must have these references at the start and end. Use \"NONE\" if there are no related roles or records. Everything should be in The primary language of the provided text is **English**. The text includes technical terms, references to academic papers, and other content that is characteristic of English-language academic and technical writing..\n\nExample paragraph with references added:\nThis is a paragraph of the output text [records: Entities (1, 2, 3), Claims (2, 5), Relationships (10, 12)]\n\n# Example Input\n-----------\nText:\n\nEntities\n\nid,entity,description\n5,ABILA CITY PARK,Abila City Park is the location of the POK rally\n\nRelationships\n\nid,source,target,description\n37,ABILA CITY PARK,POK RALLY,Abila City Park is the location of the POK rally\n38,ABILA CITY PARK,POK,POK is holding a rally in Abila City Park\n39,ABILA CITY PARK,POKRALLY,The POKRally is taking place at Abila City Park\n40,ABILA CITY PARK,CENTRAL BULLETIN,Central Bulletin is reporting on the POK rally taking place in Abila City Park\n\nOutput:\n{\n    \"title\": \"Abila City Park and POK Rally\",\n    \"summary\": \"The community revolves around the Abila City Park, which is the location of the POK rally. The park has relationships with POK, POKRALLY, and Central Bulletin, all\nof which are associated with the rally event.\",\n    \"rating\": 5.0,\n    \"rating_explanation\": \"The impact rating is moderate due to the potential for unrest or conflict during the POK rally.\",\n    \"findings\": [\n        {\n            \"summary\": \"Abila City Park as the central location\",\n            \"explanation\": \"Abila City Park is the central entity in this community, serving as the location for the POK rally. This park is the common link between all other\nentities, suggesting its significance in the community. The park's association with the rally could potentially lead to issues such as public disorder or conflict, depending on the\nnature of the rally and the reactions it provokes. [records: Entities (5), Relationships (37, 38, 39, 40)]\"\n        },\n        {\n            \"summary\": \"POK's role in the community\",\n            \"explanation\": \"POK is another key entity in this community, being the organizer of the rally at Abila City Park. The nature of POK and its rally could be a potential\nsource of threat, depending on their objectives and the reactions they provoke. The relationship between POK and the park is crucial in understanding the dynamics of this community.\n[records: Relationships (38)]\"\n        },\n        {\n            \"summary\": \"POKRALLY as a significant event\",\n            \"explanation\": \"The POKRALLY is a significant event taking place at Abila City Park. This event is a key factor in the community's dynamics and could be a potential\nsource of threat, depending on the nature of the rally and the reactions it provokes. The relationship between the rally and the park is crucial in understanding the dynamics of this\ncommunity. [records: Relationships (39)]\"\n        },\n        {\n            \"summary\": \"Role of Central Bulletin\",\n            \"explanation\": \"Central Bulletin is reporting on the POK rally taking place in Abila City Park. This suggests that the event has attracted media attention, which could\namplify its impact on the community. The role of Central Bulletin could be significant in shaping public perception of the event and the entities involved. [records: Relationships\n(40)]\"\n        }\n    ]\n\n}\n\n# Real Data\n\nUse the following text for your answer. Do not make anything up in your answer.\n\nText:\n-----Entities-----\nhuman_readable_id,title,description,degree\n115,LOW-LEVEL COMMUNITY SUMMARIES,LOW-LEVEL COMMUNITY SUMMARIES are a type of community summary used in the News dataset for analysis. These summaries provide a detailed overview of the source text and are generated from lower hierarchical levels of the community in the knowledge graph.,3\n23,ENTITY KNOWLEDGE GRAPH,An entity knowledge graph is a graph-based representation of entities and their relationships derived from source documents,2\n116,INTERMEDIATE-LEVEL COMMUNITY SUMMARIES,\"INTERMEDIATE-LEVEL COMMUNITY SUMMARIES are summaries that provide a mid-level overview of the source text. These summaries are generated from intermediate hierarchical levels of the community in the knowledge graph, offering a balanced perspective that captures essential details without overwhelming the reader with excessive information. This approach ensures that the summaries are both informative and concise, making them valuable for understanding the structural dynamics and relationships within specialized communities, particularly in the domain of Natural Language Processing and Information Retrieval.\",2\n34,TEXT CHUNKS,\"TEXT CHUNKS are segments of text that are embedded into a vector space for analysis. These segments are extracted from source documents and are used for processing in the Graph RAG (Retrieval-Augmented Generation) approach. By embedding these text chunks into a vector space, they can be analyzed more effectively, facilitating various natural language processing and information retrieval tasks.\",5\n24,SOURCE DOCUMENTS,\"Source documents are the original texts from which information is extracted, retrieved, or summarized. These documents serve as the foundational input texts for various processing tasks, including the Graph RAG (Retrieval-Augmented Generation) approach. In this context, source documents are critical for extracting and analyzing information, ensuring that the data used in computational linguistics and information retrieval tasks is accurate and comprehensive.\",5\n120,ENTITY REFERENCES,\"Entity references are mentions of entities within text chunks, extracted during the processing\",3\n133,DOCUMENT CORPUS,Document corpus refers to the collection of documents being processed in the Graph RAG approach,2\n129,CHUNK SIZE,Chunk size refers to the length of text chunks used in the extraction process,1\n121,RECALL,Recall is a metric used to measure the completeness of entity extraction from text chunks,1\n122,PRECISION,Precision is a metric used to measure the accuracy of entity extraction from text chunks,1\n132,DOMAIN,Domain refers to the specific area of knowledge or field to which the document corpus belongs,1\n\n\n-----Relationships-----\nhuman_readable_id,source,target,description,rank\n126,GRAPH RAG,LOW-LEVEL COMMUNITY SUMMARIES,Low-level community summaries are generated in the Graph RAG approach,93\n103,GRAPH RAG,ENTITY KNOWLEDGE GRAPH,Graph RAG uses an entity knowledge graph to index text,92\n127,GRAPH RAG,INTERMEDIATE-LEVEL COMMUNITY SUMMARIES,Intermediate-level community summaries are generated in the Graph RAG approach,92\n68,LLM,TEXT CHUNKS,Text chunks are processed using LLM to extract elements of a graph index,37\n407,LOW-LEVEL COMMUNITY SUMMARIES,NEWS DATASET,Low-level community summaries are derived from the News dataset for analysis,18\n218,SOURCE DOCUMENTS,TEXT CHUNKS,\"In the domain of Natural Language Processing and Information Retrieval, \"\"SOURCE DOCUMENTS\"\" and \"\"TEXT CHUNKS\"\" are closely related entities. Text chunks are extracted from source documents, specifically for processing in the Graph RAG (Retrieval-Augmented Generation) approach. This method involves breaking down the source documents into smaller, manageable pieces, or text chunks, which can then be effectively utilized in various computational processes, enhancing the efficiency and accuracy of information retrieval and generation tasks.\",10\n254,TEXT CHUNKS,ELEMENT INSTANCES,Element instances are extracted from text chunks,9\n255,TEXT CHUNKS,ENTITY REFERENCES,Entity references are extracted from text chunks during processing,8\n220,SOURCE DOCUMENTS,LOW-LEVEL COMMUNITY SUMMARIES,Low-level community summaries are derived from source documents,8\n221,SOURCE DOCUMENTS,DOCUMENT CORPUS,Document corpus consists of source documents being processed,7\n217,ENTITY KNOWLEDGE GRAPH,SOURCE DOCUMENTS,An entity knowledge graph is derived from source documents,7\n219,SOURCE DOCUMENTS,INTERMEDIATE-LEVEL COMMUNITY SUMMARIES,Intermediate-level community summaries are derived from source documents,7\n256,TEXT CHUNKS,CHUNK SIZE,Chunk size refers to the length of text chunks used in the extraction process,6\n422,ENTITY REFERENCES,RECALL,Recall measures the completeness of entity references extracted from text chunks,4\n423,ENTITY REFERENCES,PRECISION,Precision measures the accuracy of entity references extracted from text chunks,4\n430,DOMAIN,DOCUMENT CORPUS,Domain refers to the specific area of knowledge of the document corpus,3\n\nOutput:"}}
